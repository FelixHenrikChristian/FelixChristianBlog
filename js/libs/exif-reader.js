((e,t)=>{"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ExifReader=t():e.ExifReader=t()})(Object("undefined"!=typeof self?self:this),function(){return(Et={d:function(e,t){for(var n in t)Et.o(t,n)&&!Et.o(e,n)&&Object.defineProperty(e,n,{enumerable:1,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:1})}}).r(wt={}),Et.d(wt,{default:function(){return ur},errors:function(){return sr},load:function(){return ft},loadView:function(){return dt}}),Ft=(()=>{for(var e=function e(t){var n;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if("object"!==o(n=t)||void 0===n.length||void 0===n.readUInt8||void 0===n.readUInt16LE||void 0===n.readUInt16BE||void 0===n.readUInt32LE||void 0===n.readUInt32BE||void 0===n.readInt32LE||void 0===n.readInt32BE)throw Error("DataView: Passed buffer type is unsupported.");this.buffer=t,this.byteLength=this.buffer.length},t=e.prototype,n=[{key:"getUint8",value:function(e){return this.buffer.readUInt8(e)}},{key:"getUint16",value:function(e,t){return t?this.buffer.readUInt16LE(e):this.buffer.readUInt16BE(e)}},{key:"getUint32",value:function(e,t){return t?this.buffer.readUInt32LE(e):this.buffer.readUInt32BE(e)}},{key:"getInt32",value:function(e,t){return t?this.buffer.readInt32LE(e):this.buffer.readInt32BE(e)}}],r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||0,i.configurable=1,"value"in i&&(i.writable=1),Object.defineProperty(t,U(i.key),i)}return Object.defineProperty(e,"prototype",{writable:0}),e})(),p=void 0,B={USE_FILE:1,USE_JFIF:1,USE_PNG_FILE:1,USE_EXIF:1,USE_IPTC:1,USE_XMP:1,USE_ICC:1,USE_MPF:1,USE_PHOTOSHOP:1,USE_THUMBNAIL:1,USE_TIFF:1,USE_JPEG:1,USE_PNG:1,USE_HEIC:1,USE_AVIF:1,USE_WEBP:1,USE_GIF:1,USE_MAKER_NOTES:1},d=Ot=18761,Nt=(Mt=4+(Rt="ICC_PROFILE\0").length)+1,Gt="MPF\0",kt=65505,Lt="http://ns.adobe.com/xap/1.0/\0",Dt="http://ns.adobe.com/xmp/extension/\0",_t="Photoshop 3.0",jt="PNG\r\n\n",g=8,Bt="XML:com.adobe.xmp\0",zt="tEXt",m="iTXt",h="zTXt",Vt=1165519206,Ht=1835625829,Wt=["GIF87a","GIF89a"],Xt="<?xpacket begin",Kt={parseAppMarkers:function(e,t){if(B.USE_TIFF&&e&&4<=e.byteLength&&(r=(n=e).getUint16(0)===d,42===n.getUint16(2,r)))return a(B.USE_EXIF?{hasAppMarkers:1,tiffHeaderOffset:0}:{},"tiff","TIFF");var n,r;if(B.USE_JPEG&&(n=e)&&2<=n.byteLength&&65496===n.getUint16(0))return a((e=>{for(var t,n,r,i,o,a,u,s,c,f,l,d,p,g,m,h,y,v,b,S,I=2,P=0;I+4+5<=e.byteLength;){if(B.USE_FILE&&(b=I,65472===e.getUint16(b)))x=e.getUint16(I+2),t=I+2;else if(B.USE_FILE&&(b=I,65474===e.getUint16(b)))x=e.getUint16(I+2),n=I+2;else if(B.USE_JFIF&&(y=I,v=void 0,v="JFIF".length,65504===(h=e).getUint16(y))&&"JFIF"===R(h,y+4,v)&&0===h.getUint8(y+4+v))x=e.getUint16(I+2),r=I+2;else if(B.USE_EXIF&&(h=I,y=void 0,y="Exif".length,(v=e).getUint16(h)===kt)&&"Exif"===R(v,h+4,y)&&0===v.getUint8(h+4+y)){var A,C,x=e.getUint16(I+2),T=I+10;1===++P?(s=T,c=I,f=x):2===P?(A=X(e,c,f,s))<(C=X(e,I,x,T))&&(A=C,s=T,c=I,f=x):A<(C=X(e,I,x,T))&&(A=C,s=T,c=I,f=x),i=s}else if(B.USE_XMP&&(T=I,(m=e).getUint16(T)===kt)&&R(m,T+4,Lt.length)===Lt)a=a||[],x=e.getUint16(I+2),a.push({dataOffset:I+33,length:x-31});else if(B.USE_XMP&&(m=I,(g=e).getUint16(m)===kt)&&R(g,m+4,Dt.length)===Dt)a=a||[],x=e.getUint16(I+2),a.push({dataOffset:I+79,length:x-77});else if(B.USE_IPTC&&(g=I,p=void 0,p=_t.length,65517===(d=e).getUint16(g))&&R(d,g+4,p)===_t&&0===d.getUint8(g+4+p))x=e.getUint16(I+2),o=I+18;else if(B.USE_ICC&&(d=I,p=void 0,p=Rt.length,65506===(E=e).getUint16(d))&&R(E,d+4,p)===Rt){var U,E=I+18,w=(x=e.getUint16(I+2))-16,F=e.getUint8(I+Mt),O=e.getUint8(I+Nt);(U=U||[]).push({offset:E,length:w,chunkNumber:F,chunksTotal:O})}else if(B.USE_MPF&&(E=I,w=void 0,w=Gt.length,65506===(F=e).getUint16(E))&&R(F,E+4,w)===Gt)x=e.getUint16(I+2),u=I+8;else{if(O=I,!(65504<=(l=(l=e).getUint16(O))&&l<=65519||65534===l||65472===l||65474===l||65476===l||65499===l||65501===l||65498===l)){if(l=I,65535!==e.getUint16(l))break;I++;continue}x=e.getUint16(I+2)}I+=2+x}return 1<P&&(S=P,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("ExifReader: Found ".concat(S," Exif segments (APP1). ")+"Will pick the best candidate segment.")),{hasAppMarkers:2<I,fileDataOffset:t||n,jfifDataOffset:r,tiffHeaderOffset:i,iptcDataOffset:o,xmpChunks:a,iccChunks:U,mpfDataOffset:u}})(e),"jpeg","JPEG");if(B.USE_PNG&&e&&R(e,0,jt.length)===jt)return a(((e,t)=>{for(var n,r,i,o,a,u,s,c={hasAppMarkers:0},f=jt.length;f+4+4<=e.byteLength;)B.USE_PNG_FILE&&"IHDR"===R(e,f+4,4)?(c.hasAppMarkers=1,c.pngHeaderOffset=f+g):B.USE_XMP&&R(u=e,(s=f)+4,4)===m&&R(u,s+g,Bt.length)===Bt?void 0!==(u=((e,t)=>{t+=g+Bt.length+1+1;for(var n=0;n<2&&t<e.byteLength;)0===e.getUint8(t)&&n++,t++;if(!(n<2))return t})(e,f))&&(c.hasAppMarkers=1,c.xmpChunks=[{dataOffset:u,length:e.getUint32(f+0)-(u-(f+g))}]):(s=t,(u=R(u=e,f+4,4))===zt||u===m||u===h&&s?(c.hasAppMarkers=1,n=R(e,f+4,4),c.pngTextChunks||(c.pngTextChunks=[]),c.pngTextChunks.push({length:e.getUint32(f+0),type:n,offset:f+g})):"eXIf"===R(e,f+4,4)?(c.hasAppMarkers=1,c.tiffHeaderOffset=f+g):B.USE_ICC&&t&&"iCCP"===R(e,f+4,4)?(c.hasAppMarkers=1,n=e.getUint32(f+0),a=void 0,a=b(i=e,o=r=f+g),o+=a.length+1,i=(a={profileName:a,compressionMethod:i.getUint8(o),compressedProfileOffset:o+=1}).profileName,o=a.compressionMethod,a=a.compressedProfileOffset,c.iccChunks||(c.iccChunks=[]),c.iccChunks.push({offset:a,length:n-(a-r),chunkNumber:1,chunksTotal:1,profileName:i,compressionMethod:o})):(a=["pHYs","tIME"],r=R(r=e,f+4,4),a.includes(r)&&(c.hasAppMarkers=1,c.pngChunkOffsets||(c.pngChunkOffsets=[]),c.pngChunkOffsets.push(f+0)))),f+=e.getUint32(f+0)+4+4+4;return c})(e,t),"png","PNG");if(B.USE_HEIC&&(e=>{if(e)try{var t=Y(e,0);return t&&-1!==["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"].indexOf(t.majorBrand)}catch(e){}})(e))return a(q(e),"heic","HEIC");if(B.USE_AVIF&&(e=>{if(e)try{var t=Y(e,0);return t&&"avif"===t.majorBrand}catch(e){}})(e))return a(q(e),"avif","AVIF");if(B.USE_WEBP&&(r=e)&&"RIFF"===R(r,0,4)&&"WEBP"===R(r,8,4))return a((e=>{for(var t,n,r,i,o=12,a=0;o+8<e.byteLength;){var u=R(e,o,4),s=e.getUint32(o+4,1);B.USE_EXIF&&"EXIF"===u?(a=1,t="Exif\0\0"===R(e,o+8,6)?o+8+6:o+8):B.USE_XMP&&"XMP "===u?(a=1,n=[{dataOffset:o+8,length:s}]):B.USE_ICC&&"ICCP"===u?r=[{offset:o+8,length:s,chunkNumber:a=1,chunksTotal:1}]:"VP8X"===u&&(a=1,i=o+8),o+=8+(s%2==0?s:s+1)}return{hasAppMarkers:a,tiffHeaderOffset:t,xmpChunks:n,iccChunks:r,vp8xChunkOffset:i}})(e),"webp","WebP");if(B.USE_GIF&&e&&Wt.includes(R(e,0,6)))return a({gifHeaderOffset:0},"gif","GIF");if(B.USE_XMP&&e&&R(e,0,Xt.length)===Xt)return a(((t=[]).push({dataOffset:0,length:e.byteLength}),{xmpChunks:t}),"xml","XML");throw Error("Invalid image format")}},Yt={0:{name:"GPSVersionID",description:function(e){return 2===e[0]&&2===e[1]&&0===e[2]&&0===e[3]?"Version 2.2":"Unknown"}},1:{name:"GPSLatitudeRef",description:function(e){e=e.join("");return"N"===e?"North latitude":"S"===e?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:H},3:{name:"GPSLongitudeRef",description:function(e){e=e.join("");return"E"===e?"East longitude":"W"===e?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:H},5:{name:"GPSAltitudeRef",description:function(e){return 0===e?"Sea level":1===e?"Sea level reference (negative value)":"Unknown"}},6:{name:"GPSAltitude",description:function(e){return e[0]/e[1]+" m"}},7:{name:"GPSTimeStamp",description:function(e){return e.map(function(e){e=(e=>{if(Array.isArray(e))return e})(e=e)||(e=>{var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,r,i,o,a=[],u=1,s=0;try{for(i=(t=t.call(e)).next;!(u=(n=i.call(t)).done)&&(a.push(n.value),2!==a.length);u=1);}catch(e){s=1,r=e}finally{try{if(!u&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(s)throw r}}return a}})(e)||(e=>{var t;if(e)return"string"==typeof e?ee(e,2):"Map"===(t="Object"===(t={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ee(e,2):void 0})(e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})(),e=e[0]/e[1];return/^\d(\.|$)/.test("".concat(e))?"0".concat(e):e}).join(":")}},8:"GPSSatellites",9:{name:"GPSStatus",description:function(e){e=e.join("");return"A"===e?"Measurement in progress":"V"===e?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:function(e){e=e.join("");return"2"===e?"2-dimensional measurement":"3"===e?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:function(e){e=e.join("");return"K"===e?"Kilometers per hour":"M"===e?"Miles per hour":"N"===e?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:function(e){e=e.join("");return"T"===e?"True direction":"M"===e?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:function(e){e=e.join("");return"T"===e?"True direction":"M"===e?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:function(e){e=e.join("");return"N"===e?"North latitude":"S"===e?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:function(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}},21:{name:"GPSDestLongitudeRef",description:function(e){e=e.join("");return"E"===e?"East longitude":"W"===e?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:function(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}},23:{name:"GPSDestBearingRef",description:function(e){e=e.join("");return"T"===e?"True direction":"M"===e?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:function(e){e=e.join("");return"K"===e?"Kilometers":"M"===e?"Miles":"N"===e?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:k},28:{name:"GPSAreaInformation",description:k},29:"GPSDateStamp",30:{name:"GPSDifferential",description:function(e){return 0===e?"Measurement without differential correction":1===e?"Differential correction applied":"Unknown"}},31:"GPSHPositioningError"},qt={1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:i},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"},$t={45056:{name:"MPFVersion",description:i},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"},Zt=D({},Jt={11:"ProcessingSoftware",254:{name:"SubfileType",description:function(e){return{0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"}[e]||"Unknown"}},255:{name:"OldSubfileType",description:function(e){return{0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"}[e]||"Unknown"}},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:function(e){return{1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"}[e]||"Unknown"}},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:function(e){return{1:"Normal",2:"Reversed"}[e]||"Unknown"}},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:function(e){return 1===e?"top-left":2===e?"top-right":3===e?"bottom-right":4===e?"bottom-left":5===e?"left-top":6===e?"right-top":7===e?"right-bottom":8===e?"left-bottom":"Undefined"}},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:(v={ApertureValue:function(e){return Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},ColorSpace:function(e){return 1===e?"sRGB":65535===e?"Uncalibrated":"Unknown"},ComponentsConfiguration:function(e){return e.map(function(e){return 49===e?"Y":50===e?"Cb":51===e?"Cr":52===e?"R":53===e?"G":54===e?"B":void 0}).join("")},Contrast:function(e){return 0===e?"Normal":1===e?"Soft":2===e?"Hard":"Unknown"},CustomRendered:function(e){return 0===e?"Normal process":1===e?"Custom process":"Unknown"},ExposureMode:function(e){return 0===e?"Auto exposure":1===e?"Manual exposure":2===e?"Auto bracket":"Unknown"},ExposureProgram:function(e){return 0===e?"Undefined":1===e?"Manual":2===e?"Normal program":3===e?"Aperture priority":4===e?"Shutter priority":5===e?"Creative program":6===e?"Action program":7===e?"Portrait mode":8===e?"Landscape mode":9===e?"Bulb":"Unknown"},ExposureTime:function(e){var t;return.25<e[0]/e[1]?(t=e[0]/e[1],Number.isInteger(t)?""+t:t.toFixed(1)):0!==e[0]?"1/".concat(Math.round(e[1]/e[0])):"0/".concat(e[1])},FNumber:function(e){return"f/".concat(Number(e[0]/e[1]).toFixed(1))},FocalLength:function(e){return e[0]/e[1]+" mm"},FocalPlaneResolutionUnit:function(e){return 2===e?"inches":3===e?"centimeters":4===e?"millimeters":"Unknown"},LightSource:function(e){return 1===e?"Daylight":2===e?"Fluorescent":3===e?"Tungsten (incandescent light)":4===e?"Flash":9===e?"Fine weather":10===e?"Cloudy weather":11===e?"Shade":12===e?"Daylight fluorescent (D 5700 – 7100K)":13===e?"Day white fluorescent (N 4600 – 5400K)":14===e?"Cool white fluorescent (W 3900 – 4500K)":15===e?"White fluorescent (WW 3200 – 3700K)":17===e?"Standard light A":18===e?"Standard light B":19===e?"Standard light C":20===e?"D55":21===e?"D65":22===e?"D75":23===e?"D50":24===e?"ISO studio tungsten":255===e?"Other light source":"Unknown"},MeteringMode:function(e){return 1===e?"Average":2===e?"CenterWeightedAverage":3===e?"Spot":4===e?"MultiSpot":5===e?"Pattern":6===e?"Partial":255===e?"Other":"Unknown"},ResolutionUnit:function(e){return 2===e?"inches":3===e?"centimeters":"Unknown"},Saturation:function(e){return 0===e?"Normal":1===e?"Low saturation":2===e?"High saturation":"Unknown"},FocalLengthIn35mmFilm:function(e){return 0===e?"Unknown":e+" mm"},SceneCaptureType:function(e){return 0===e?"Standard":1===e?"Landscape":2===e?"Portrait":3===e?"Night scene":"Unknown"},Sharpness:function(e){return 0===e?"Normal":1===e?"Soft":2===e?"Hard":"Unknown"},ShutterSpeedValue:function(e){e=Math.pow(2,e[0]/e[1]);return e<=1?"".concat(Math.round(1/e)):"1/".concat(Math.round(e))},WhiteBalance:function(e){return 0===e?"Auto white balance":1===e?"Manual white balance":"Unknown"},XResolution:function(e){return""+Math.round(e[0]/e[1])},YResolution:function(e){return""+Math.round(e[0]/e[1])}}).XResolution},283:{name:"YResolution",description:v.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:function(e){return""+Math.round(e[0]/e[1])}},287:{name:"YPosition",description:function(e){return""+Math.round(e[0]/e[1])}},290:{name:"GrayResponseUnit",description:function(e){return{1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"}[e]||"Unknown"}},296:{name:"ResolutionUnit",description:v.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:function(e){return e.map(function(e){return"".concat(e[0],"/").concat(e[1])}).join(", ")}},319:{name:"PrimaryChromaticities",description:function(e){return e.map(function(e){return"".concat(e[0],"/").concat(e[1])}).join(", ")}},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:function(e){return{1:"CMYK",2:"Not CMYK"}[e]||"Unknown"}},337:"TargetPrinter",338:{name:"ExtraSamples",description:function(e){return{0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"}[e]||"Unknown"}},339:{name:"SampleFormat",description:function(e){var t={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(function(e){return t[e]||"Unknown"}).join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:function(e){return e.map(function(e){return""+e[0]/e[1]}).join("/")}},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:function(e){return 1===e?"centered":2===e?"co-sited":"undefined "+e}},532:{name:"ReferenceBlackWhite",description:function(e){return e.map(function(e){return""+e[0]/e[1]}).join(", ")}},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:function(e){return e.join("; ")}},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:{name:"XPTitle",description:e},40092:{name:"XPComment",description:e},40093:{name:"XPAuthor",description:e},40094:{name:"XPKeywords",description:e},40095:{name:"XPSubject",description:e},42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:function(e){return{0:"Unsafe",1:"Safe"}[e]||"Unknown"}},50778:{name:"CalibrationIlluminant1",description:v.LightSource},50779:{name:"CalibrationIlluminant2",description:v.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:function(e){return{0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"}[e]||"Unknown"}},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:function(e){return{1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"}[e]||"Unknown"}},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:function(e){return{0:"Linear",1:"sRGB"}[e]||"Unknown"}},51108:{name:"ProfileLookTableEncoding",description:function(e){return{0:"Linear",1:"sRGB"}[e]||"Unknown"}},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:function(e){return{0:"Auto",1:"None"}[e]||"Unknown"}},51111:"NewRawImageDigest",51112:"RawToPreviewGain"},{33434:{name:"ExposureTime",description:v.ExposureTime},33437:{name:"FNumber",description:v.FNumber},34850:{name:"ExposureProgram",description:v.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:function(){return"[Raw OECF table data]"}},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:function(e){return{1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"}[e]||"Unknown"}},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:i},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:v.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:v.ShutterSpeedValue},37378:{name:"ApertureValue",description:v.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:function(e){return Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)}},37382:{name:"SubjectDistance",description:function(e){return e[0]/e[1]+" m"}},37383:{name:"MeteringMode",description:v.MeteringMode},37384:{name:"LightSource",description:v.LightSource},37385:{name:"Flash",description:function(e){return 0===e?"Flash did not fire":1===e?"Flash fired":5===e?"Strobe return light not detected":7===e?"Strobe return light detected":9===e?"Flash fired, compulsory flash mode":13===e?"Flash fired, compulsory flash mode, return light not detected":15===e?"Flash fired, compulsory flash mode, return light detected":16===e?"Flash did not fire, compulsory flash mode":24===e?"Flash did not fire, auto mode":25===e?"Flash fired, auto mode":29===e?"Flash fired, auto mode, return light not detected":31===e?"Flash fired, auto mode, return light detected":32===e?"No flash function":65===e?"Flash fired, red-eye reduction mode":69===e?"Flash fired, red-eye reduction mode, return light not detected":71===e?"Flash fired, red-eye reduction mode, return light detected":73===e?"Flash fired, compulsory flash mode, red-eye reduction mode":77===e?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":79===e?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":89===e?"Flash fired, auto mode, red-eye reduction mode":93===e?"Flash fired, auto mode, return light not detected, red-eye reduction mode":95===e?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"}},37386:{name:"FocalLength",description:v.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:function(e){return{C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"}[e]||"Unknown"}},37395:"ImageHistory",37396:{name:"SubjectArea",description:function(e){return 2===e.length?"Location; X: ".concat(e[0],", Y: ").concat(e[1]):3===e.length?"Circle; X: ".concat(e[0],", Y: ").concat(e[1],", diameter: ").concat(e[2]):4===e.length?"Rectangle; X: ".concat(e[0],", Y: ").concat(e[1],", width: ").concat(e[2],", height: ").concat(e[3]):"Unknown"}},37500:{name:"MakerNote",description:function(){return"[Raw maker note data]"}},37510:{name:"UserComment",description:k},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37724:"ImageSourceData",37888:{name:"AmbientTemperature",description:function(e){return e[0]/e[1]+" °C"}},37889:{name:"Humidity",description:function(e){return e[0]/e[1]+" %"}},37890:{name:"Pressure",description:function(e){return e[0]/e[1]+" hPa"}},37891:{name:"WaterDepth",description:function(e){return e[0]/e[1]+" m"}},37892:{name:"Acceleration",description:function(e){return e[0]/e[1]+" mGal"}},37893:{name:"CameraElevationAngle",description:function(e){return e[0]/e[1]+" °"}},40960:{name:"FlashpixVersion",description:function(e){return e.map(function(e){return String.fromCharCode(e)}).join("")}},40961:{name:"ColorSpace",description:v.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:function(){return"[Raw SFR table data]"}},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:v.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:function(e){var e=(e=>{if(Array.isArray(e))return e})(e=e)||(e=>{var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,r,i,o,a=[],u=1,s=0;try{for(i=(t=t.call(e)).next;!(u=(n=i.call(t)).done)&&(a.push(n.value),2!==a.length);u=1);}catch(e){s=1,r=e}finally{try{if(!u&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(s)throw r}}return a}})(e)||(e=>{var t;if(e)return"string"==typeof e?Q(e,2):"Map"===(t="Object"===(t={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Q(e,2):void 0})(e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})(),t=e[0],e=e[1];return"X: ".concat(t,", Y: ").concat(e)}},41493:"ExposureIndex",41495:{name:"SensingMethod",description:function(e){return 1===e?"Undefined":2===e?"One-chip color area sensor":3===e?"Two-chip color area sensor":4===e?"Three-chip color area sensor":5===e?"Color sequential area sensor":7===e?"Trilinear sensor":8===e?"Color sequential linear sensor":"Unknown"}},41728:{name:"FileSource",description:function(e){return 3===e?"DSC":"Unknown"}},41729:{name:"SceneType",description:function(e){return 1===e?"A directly photographed image":"Unknown"}},41730:{name:"CFAPattern",description:function(){return"[Raw CFA pattern table data]"}},41985:{name:"CustomRendered",description:v.CustomRendered},41986:{name:"ExposureMode",description:v.ExposureMode},41987:{name:"WhiteBalance",description:v.WhiteBalance},41988:{name:"DigitalZoomRatio",description:function(e){return 0===e[0]?"Digital zoom was not used":""+e[0]/e[1]}},41989:{name:"FocalLengthIn35mmFilm",description:v.FocalLengthIn35mmFilm},41990:{name:"SceneCaptureType",description:v.SceneCaptureType},41991:{name:"GainControl",description:function(e){return 0===e?"None":1===e?"Low gain up":2===e?"High gain up":3===e?"Low gain down":4===e?"High gain down":"Unknown"}},41992:{name:"Contrast",description:v.Contrast},41993:{name:"Saturation",description:v.Saturation},41994:{name:"Sharpness",description:v.Sharpness},41995:{name:"DeviceSettingDescription",description:function(){return"[Raw device settings table data]"}},41996:{name:"SubjectDistanceRange",description:function(e){return 1===e?"Macro":2===e?"Close view":3===e?"Distant view":"Unknown"}},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:function(e){var t=parseFloat((e[0][0]/e[0][1]).toFixed(5)),n=parseFloat((e[1][0]/e[1][1]).toFixed(5)),t="".concat(t,"-").concat(n," mm");return 0===e[3][1]?"".concat(t," f/?"):(n=1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1])),"".concat(t," f/").concat(parseFloat(n.toFixed(5))))}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:function(e){return{1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}[e]||"Unknown"}},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"}),Qt="interoperability",en="pentax",I=t(t(t(t(t(t(t(t({},"0th",Zt),"1st",Jt),"exif",Zt),"gps",Yt),Qt,qt),"mpf",B.USE_MPF?$t:{}),"canon",B.USE_MAKER_NOTES?{4:{name:"ShotInfo",description:function(e){return e}}}:{}),en,B.USE_MAKER_NOTES?{0:{name:"PentaxVersion",description:function(e){return e.join(".")}},5:"PentaxModelID",555:"LevelInfo"}:{}),rn={exif:1,iptc:1,photoshop:1,mpf:1,makerNotes:1},z={exif:1,iptc:1,xmp:1,icc:1,photoshop:1,makerNotes:1,mpf:1,file:1,jfif:1,png:1,riff:1,gif:1,gps:1,composite:1,thumbnail:1},V={exifIfdPointer:"Exif IFD Pointer",gpsInfoIfdPointer:"GPS Info IFD Pointer",interoperabilityIfdPointer:"Interoperability IFD Pointer"},on={thumbnail:["JPEGInterchangeFormat","JPEGInterchangeFormatLength"],iptc:["IPTC-NAA"],xmp:["ApplicationNotes"],icc:["ICC_Profile"],photoshop:["ImageSourceData","PhotoshopSettings"],makerNotes:["MakerNote","Make"],gps:["GPSLatitude","GPSLatitudeRef","GPSLongitude","GPSLongitudeRef","GPSAltitude","GPSAltitudeRef"]},an={file:["Image Width","Image Height"],exif:["FocalLength","FocalPlaneXResolution","FocalPlaneYResolution","FocalPlaneResolutionUnit","FocalLengthIn35mmFilm"]},A=ae(),un={1:(P={getAsciiValue:function(e){return e.map(function(e){return String.fromCharCode(e)})},getByteAt:ne,getAsciiAt:function(e,t){return e.getUint8(t)},getShortAt:function(e,t,n){return e.getUint16(t,n===d)},getLongAt:re,getRationalAt:function(e,t,n){return[re(e,t,n),re(e,t+4,n)]},getUndefinedAt:ne,getSlongAt:ie,getSrationalAt:function(e,t,n){return[ie(e,t,n),ie(e,t+4,n)]},getIfdPointerAt:re,typeSizes:tn={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},tagTypes:nn={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},getTypeSize:function(e){if(void 0===nn[e])throw Error("No such type found.");return tn[nn[e]]}}).getByteAt,2:P.getAsciiAt,3:P.getShortAt,4:P.getLongAt,5:P.getRationalAt,7:P.getUndefinedAt,9:P.getSlongAt,10:P.getSrationalAt,13:P.getIfdPointerAt},sn="Exif IFD Pointer",cn="GPS Info IFD Pointer",fn="Interoperability IFD Pointer",ln={read:function(e,t,n){var r,i,o,a,u,s,c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,f=4<arguments.length&&void 0!==arguments[4]?arguments[4]:void 0,l=W(e,t),d=(r=n,i=c,o=f,S(e,"0th",t,fe(e,t,d=l),d,r,i,o,"exif"));return{tags:(r=e,i=t,o=l,a=n,u=c,s=f,r=void 0!==(d=d)[sn]?D(d,S(r,"exif",i,i+d[sn].value,o,a,u,s,"exif")):d,i=e,o=t,a=l,u=n,s=c,d=f,i=void 0!==r[cn]?D(r,S(i,"gps",o,o+r[cn].value,a,u,s,d,"exif")):r,o=e,a=t,u=l,s=n,d=c,r=f,void 0!==i[fn]?D(i,S(o,Qt,a,a+i[fn].value,u,s,d,r,"exif")):i),byteOrder:l}}},dn={read:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:void 0,o=W(e,t),a=e,u=t,s=S(e,"mpf",t,fe(e,t,o),o,n,r,i,"mpf"),c=o;if(s.MPEntry){for(var f,l=[],d=0;d<Math.ceil(s.MPEntry.value.length/C);d++){l[d]={};var p=y(s.MPEntry.value,d*C,P.getTypeSize("LONG"),c),g=(l[d].ImageFlags=(m=void 0,m=[],(g=[(g=p)>>31&1,g>>30&1,g>>29&1])[0]&&m.push("Dependent Parent Image"),g[1]&&m.push("Dependent Child Image"),g[2]&&m.push("Representative Image"),{value:g,description:m.join(", ")||"None"}),l[d].ImageFormat=(e=>({value:e=e>>24&7,description:0==e?"JPEG":"Unknown"}))(p),l[d].ImageType=(e=>({value:e&=16777215,description:{196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"}[e]||"Unknown"}))(p),y(s.MPEntry.value,d*C+4,P.getTypeSize("LONG"),c)),p=(l[d].ImageSize={value:g,description:""+g},m=d,p=s.MPEntry,h=c,f=u,0===m?0:y(p.value,m*C+8,P.getTypeSize("LONG"),h)+f),m=(l[d].ImageOffset={value:p,description:""+p},y(s.MPEntry.value,d*C+12,P.getTypeSize("SHORT"),c)),h=(l[d].DependentImage1EntryNumber={value:m,description:""+m},y(s.MPEntry.value,d*C+14,P.getTypeSize("SHORT"),c));l[d].DependentImage2EntryNumber={value:h,description:""+h},l[d].image=a.buffer.slice(p,p+g),O(l[d],"base64",function(){return M(this.image)})}s.Images=l}return s}},C=16,pn={read:function(t,n){var r=P.getShortAt(t,n),e=(()=>{var e;if(!(r<8))return{value:e=P.getByteAt(t,n+7),description:""+e}})();return{"Bits Per Sample":((e,t,n)=>{if(!(n<3))return{value:n=P.getByteAt(e,t+2),description:""+n}})(t,n,r),"Image Height":((e,t,n)=>{if(!(n<5))return{value:n=P.getShortAt(e,t+3),description:"".concat(n,"px")}})(t,n,r),"Image Width":((e,t,n)=>{if(!(n<7))return{value:n=P.getShortAt(e,t+5),description:"".concat(n,"px")}})(t,n,r),"Color Components":e,Subsampling:e&&((e,t,n,r)=>{if(!(r<8+3*n)){for(var i=[],o=0;o<n;o++){var a=t+8+3*o;i.push([P.getByteAt(e,a),P.getByteAt(e,a+1),P.getByteAt(e,a+2)])}return{value:i,description:1<i.length?(e=>{var t={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return e.map(function(e){return t[e[0]]}).join("")})(i)+(e=>{var t={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return 0===e.length||void 0===e[0][1]||void 0===t[e[0][1]]?"":t[e[0][1]]})(i):""}}})(t,n,e.value,r)}}},gn={read:function(t,n){var e,r=P.getShortAt(t,n),i=(()=>{var e;if(!(r<15))return{value:e=P.getByteAt(t,n+14),description:"".concat(e,"px")}})(),o=(()=>{var e;if(!(r<16))return{value:e=P.getByteAt(t,n+15),description:"".concat(e,"px")}})(),a={"JFIF Version":((e,t,n)=>{if(!(n<9))return n=P.getByteAt(e,t+7),e=P.getByteAt(e,t+7+1),{value:256*n+e,description:n+"."+e}})(t,n,r),"Resolution Unit":((e,t,n)=>{if(!(n<10))return{value:n=P.getByteAt(e,t+9),description:(e=>0===e?"None":1===e?"inches":2===e?"cm":"Unknown")(n)}})(t,n,r),XResolution:((e,t,n)=>{if(!(n<12))return{value:n=P.getShortAt(e,t+10),description:""+n}})(t,n,r),YResolution:((e,t,n)=>{if(!(n<14))return{value:n=P.getShortAt(e,t+12),description:""+n}})(t,n,r),"JFIF Thumbnail Width":i,"JFIF Thumbnail Height":o};for(e in void 0!==i&&void 0!==o&&(i=((e,t)=>{if(!(0==t||r<16+t))return{value:e.buffer.slice(n+16,n+16+t),description:"<24-bit RGB pixel data>"}})(t,3*i.value*o.value))&&(a["JFIF Thumbnail"]=i),a)void 0===a[e]&&delete a[e];return a}},x={iptc:{256:{name:"Model Version",description:function(e){return""+((e[0]<<8)+e[1])}},261:{name:"Destination",repeatable:1},276:{name:"File Format",description:function(e){return""+((e[0]<<8)+e[1])}},278:{name:"File Format Version",description:function(e){return""+((e[0]<<8)+e[1])}},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:ge},336:{name:"Time Sent",description:me},346:{name:"Coded Character Set",description:he,encoding_name:he},356:"UNO",376:{name:"ARM Identifier",description:function(e){return""+((e[0]<<8)+e[1])}},378:{name:"ARM Version",description:function(e){return""+((e[0]<<8)+e[1])}},512:{name:"Record Version",description:function(e){return""+((e[0]<<8)+e[1])}},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:function(e){return"01"===i(e)?"Additional Language":"Unknown"}},522:"Urgency",524:{name:"Subject Reference",repeatable:1,description:function(e){e=i(e).split(":");return e[2]+(e[3]?"/"+e[3]:"")+(e[4]?"/"+e[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:1},534:"Fixture Identifier",537:{name:"Keywords",repeatable:1},538:{name:"Content Location Code",repeatable:1},539:{name:"Content Location Name",repeatable:1},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:function(e){e=i(e);return"01"===e?"Object Kill":"02"===e?"Object Replace":"03"===e?"Object Append":"04"===e?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:1},559:{name:"Reference Date",repeatable:1},562:{name:"Reference Number",repeatable:1},567:{name:"Date Created",description:ge},572:{name:"Time Created",description:me},574:{name:"Digital Creation Date",description:ge},575:{name:"Digital Creation Time",description:me},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:function(e){e=i(e);return"a"===e?"morning":"p"===e?"evening":"b"===e?"both":"Unknown"}},592:{name:"By-line",repeatable:1},597:{name:"By-line Title",repeatable:1},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:1},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:1},637:{name:"Rasterized Caption",description:function(e){return e}},642:"Image Type",643:{name:"Image Orientation",description:function(e){e=i(e);return"P"===e?"Portrait":"L"===e?"Landscape":"S"===e?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:function(e){var e=i(e),t=e.charAt(0),n=e.charAt(1),r="";return"1"===t?r+="Mono":"2"===t&&(r+="Stereo"),"A"===n?r+=", actuality":"C"===n?r+=", question and answer session":"M"===n?r+=", music, transmitted by itself":"Q"===n?r+=", response to a question":"R"===n?r+=", raw sound":"S"===n?r+=", scener":"V"===n?r+=", voicer":"W"===n&&(r+=", wrap"),""!==r?r:e}},663:{name:"Audio Sampling Rate",description:function(e){return parseInt(i(e),10)+" Hz"}},664:{name:"Audio Sampling Resolution",description:function(e){e=parseInt(i(e),10);return e+(1===e?" bit":" bits")}},665:{name:"Audio Duration",description:function(e){e=i(e);return 6<=e.length?e.substr(0,2)+":"+e.substr(2,2)+":"+e.substr(4,2):e}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:function(e){return 2===e.length?"ObjectData Preview File Format":"Record 2 destination"},description:function(e){var t;return 2===e.length?0===(t=(e[0]<<8)+e[1])?"No ObjectData":1===t?"IPTC-NAA Digital Newsphoto Parameter Record":2===t?"IPTC7901 Recommended Message Format":3===t?"Tagged Image File Format (Adobe/Aldus Image data)":4===t?"Illustrator (Adobe Graphics data)":5===t?"AppleSingle (Apple Computer Inc)":6===t?"NAA 89-3 (ANPA 1312)":7===t?"MacBinary II":8===t?"IPTC Unstructured Character Oriented File Format (UCOFF)":9===t?"United Press International ANPA 1312 variant":10===t?"United Press International Down-Load Message":11===t?"JPEG File Interchange (JFIF)":12===t?"Photo-CD Image-Pac (Eastman Kodak)":13===t?"Microsoft Bit Mapped Graphics File [*.BMP]":14===t?"Digital Audio File [*.WAV] (Microsoft & Creative Labs)":15===t?"Audio plus Moving Video [*.AVI] (Microsoft)":16===t?"PC DOS/Windows Executable Files [*.COM][*.EXE]":17===t?"Compressed Binary File [*.ZIP] (PKWare Inc)":18===t?"Audio Interchange File Format AIFF (Apple Computer Inc)":19===t?"RIFF Wave (Microsoft Corporation)":20===t?"Freehand (Macromedia/Aldus)":21===t?'Hypertext Markup Language "HTML" (The Internet Society)':22===t?"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC":23===t?"MPEG 2 Audio Layer 3, ISO/IEC":24===t?"Portable Document File (*.PDF) Adobe":25===t?"News Industry Text Format (NITF)":26===t?"Tape Archive (*.TAR)":27===t?"Tidningarnas Telegrambyrå NITF version (TTNITF DTD)":28===t?"Ritzaus Bureau NITF version (RBNITF DTD)":29===t?"Corel Draw [*.CDR]":"Unknown format ".concat(t):i(e)}},713:{name:"ObjectData Preview File Format Version",description:function(e,t){var n={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}},e=i(e);if(t["ObjectData Preview File Format"]){t=i(t["ObjectData Preview File Format"].value);if(n[t]&&n[t][e])return n[t][e]}return e}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:function(e){return e[0].toString()}},1812:{name:"Max Subfile Size",description:function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}},1882:{name:"ObjectData Size Announced",description:function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}},1887:{name:"Maximum ObjectData Size",description:function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}}}},mn=function(e,t){if("string"==typeof t)return ye(t);var n=(()=>{if("undefined"!=typeof TextDecoder)return TextDecoder})();if(void 0!==n&&void 0!==e)try{return new n(e).decode(t instanceof DataView?t.buffer:Uint8Array.from(t))}catch(e){}return ye(t.map(function(e){return String.fromCharCode(e)}).join(""))},hn={read:function(e,t,n){var r,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:A;try{return Array.isArray(e)?ve(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,n,i):ve(e,(r=((e,t)=>{for(;t+12<=e.byteLength;){var n=((e,t)=>{if(943868237!==e.getUint32(t,0))throw Error("Not an IPTC resource block.");var n=e.getUint8(t+4+2);return{headerSize:6+(n=(n%2==0?n+1:n)+1)+4,type:e.getUint16(t+4),size:e.getUint32(t+4+2+n)}})(e,t);if(1028===n.type)return{naaBlock:n,dataOffset:t+n.headerSize};t+=n.headerSize+n.size+(n.size%2!=0?1:0)}throw Error("No IPTC NAA resource block.")})(e,t)).naaBlock,r.dataOffset,n,i)}catch(e){return{}}}},yn={"tiff:Orientation":function(e){return"1"===e?"Horizontal (normal)":"2"===e?"Mirror horizontal":"3"===e?"Rotate 180":"4"===e?"Mirror vertical":"5"===e?"Mirror horizontal and rotate 270 CW":"6"===e?"Rotate 90 CW":"7"===e?"Mirror horizontal and rotate 90 CW":"8"===e?"Rotate 270 CW":e},"tiff:ResolutionUnit":function(e){return v.ResolutionUnit(parseInt(e,10))},"tiff:XResolution":function(e){return n(v.XResolution,e)},"tiff:YResolution":function(e){return n(v.YResolution,e)},"exif:ApertureValue":function(e){return n(v.ApertureValue,e)},"exif:GPSLatitude":Ie,"exif:GPSLongitude":Ie,"exif:FNumber":function(e){return n(v.FNumber,e)},"exif:FocalLength":function(e){return n(v.FocalLength,e)},"exif:FocalPlaneResolutionUnit":function(e){return v.FocalPlaneResolutionUnit(parseInt(e,10))},"exif:ColorSpace":function(e){return v.ColorSpace("0x"===(e=e).substring(0,2)?parseInt(e.substring(2),16):parseInt(e,10))},"exif:ComponentsConfiguration":function(e,t){var n;return/^\d, \d, \d, \d$/.test(t)?(n=t.split(", ").map(function(e){return e.charCodeAt(0)}),v.ComponentsConfiguration(n)):t},"exif:Contrast":function(e){return v.Contrast(parseInt(e,10))},"exif:CustomRendered":function(e){return v.CustomRendered(parseInt(e,10))},"exif:ExposureMode":function(e){return v.ExposureMode(parseInt(e,10))},"exif:ExposureProgram":function(e){return v.ExposureProgram(parseInt(e,10))},"exif:ExposureTime":function(e){return Se(e)?v.ExposureTime(e.split("/").map(function(e){return parseInt(e,10)})):e},"exif:MeteringMode":function(e){return v.MeteringMode(parseInt(e,10))},"exif:Saturation":function(e){return v.Saturation(parseInt(e,10))},"exif:SceneCaptureType":function(e){return v.SceneCaptureType(parseInt(e,10))},"exif:Sharpness":function(e){return v.Sharpness(parseInt(e,10))},"exif:ShutterSpeedValue":function(e){return n(v.ShutterSpeedValue,e)},"exif:WhiteBalance":function(e){return v.WhiteBalance(parseInt(e,10))}},vn={xmp:"http://ns.adobe.com/xap/1.0/",tiff:"http://ns.adobe.com/tiff/1.0/",exif:"http://ns.adobe.com/exif/1.0/",dc:"http://purl.org/dc/elements/1.1/",xmpMM:"http://ns.adobe.com/xap/1.0/mm/",stEvt:"http://ns.adobe.com/xap/1.0/sType/ResourceEvent#",stRef:"http://ns.adobe.com/xap/1.0/sType/ResourceRef#",photoshop:"http://ns.adobe.com/photoshop/1.0/"},bn={read:function(e,t,n){var r,i,o,a={};return"string"==typeof e?we(a,e,n):(o=e,i=(r=(e=>{if(Array.isArray(e))return e})(o=0===(r=t).length?[]:(i=[Ee(o,r.slice(0,1))],1<r.length&&i.push(Ee(o,r.slice(1))),i))||(e=>{var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,r,i,o,a=[],u=1,s=0;try{for(i=(t=t.call(e)).next;!(u=(n=i.call(t)).done)&&(a.push(n.value),2!==a.length);u=1);}catch(e){s=1,r=e}finally{try{if(!u&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(s)throw r}}return a}})(o)||(e=>{var t;if(e)return"string"==typeof e?Ae(e,2):"Map"===(t="Object"===(t={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ae(e,2):void 0})(o)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})())[0],o=r[1],r=we(a,i,n),o&&(o=we(a,o,n),r||o||(delete a._raw,we(a,Ee(e,t),n)))),a}},Sn=(e=>{function t(e){if(this instanceof t)return(e=((e,t,n)=>{t=Ue(t);var r=e;if(!(t=xe()?Reflect.construct(t,n,Ue(e).constructor):t.apply(e,n))||"object"!=Pe(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t})(this,t,[e])).name="ParseError",e;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:1,configurable:1}}),Object.defineProperty(n,"prototype",{writable:0}),e&&Te(n,e),Object.defineProperty(n=t,"prototype",{writable:0}),n})(Ce(Error)),T={2e3:{name:"PathInformation",description:function(e){for(var t={},n=[],r=0;r<e.byteLength;r+=26){var i=P.getShortAt(e,r);In[i]&&(t[i]||(t[i]=In[i].description),n.push({type:i,path:In[i].path(e,r+2)}))}return JSON.stringify({types:t,paths:n})}},2999:{name:"ClippingPathName",description:function(e){return((e=>{if(Array.isArray(e))return e})(e=F(e,0))||(e=>{var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,r,i,o,a=[],u=1,s=0;try{for(i=(t=t.call(e)).next;!(u=(n=i.call(t)).done)&&(a.push(n.value),2!==a.length);u=1);}catch(e){s=1,r=e}finally{try{if(!u&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(s)throw r}}return a}})(e)||(e=>{var t;if(e)return"string"==typeof e?Xe(e,2):"Map"===(t="Object"===(t={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Xe(e,2):void 0})(e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})())[1]}}},In=r(r(r(r(r(r(r(r(r({},0,{description:"Closed subpath length",path:function(e,t){return[P.getShortAt(e,t)]}}),1,{description:"Closed subpath Bezier knot, linked",path:Ke}),2,{description:"Closed subpath Bezier knot, unlinked",path:Ke}),3,{description:"Open subpath length",path:function(e,t){return[P.getShortAt(e,t)]}}),4,{description:"Open subpath Bezier knot, linked",path:Ke}),5,{description:"Open subpath Bezier knot, unlinked",path:Ke}),6,{description:"Path fill rule",path:function(){return[]}}),8,{description:"Initial fill rule",path:function(e,t){return[P.getShortAt(e,t)]}}),7,{description:"Clipboard",path:function(e,t){return[[c(e,t,8),c(e,t+4,8),c(e,t+8,8),c(e,t+12,8)],c(e,t+16,8)]}}),Pn={read:function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:A,r=w(new Uint8Array(e).buffer),i={},o=0;o<e.length;){var a=R(r,o,Tn),u=(o+=Tn,P.getShortAt(r,o)),s=((e,t)=>(e=(t=(e=>{if(Array.isArray(e))return e})(e=F(e,t))||(e=>{var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,r,i,o,a=[],u=1,s=0;try{for(i=(t=t.call(e)).next;!(u=(n=i.call(t)).done)&&(a.push(n.value),2!==a.length);u=1);}catch(e){s=1,r=e}finally{try{if(!u&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(s)throw r}}return a}})(e)||(e=>{var t;if(e)return"string"==typeof e?Je(e,2):"Map"===(t="Object"===(t={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Je(e,2):void 0})(e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})())[0],{tagName:t[1],tagNameSize:1+e+(e%2==0?1:0)}))(r,o+=Cn),c=s.tagName,s=(o+=s.tagNameSize,P.getLongAt(r,o));if(o+=xn,a===An){a=u,f=t;var f=c||(T[a]&&T[a].name?T[a].name:f?"undefined-".concat(a):void 0);if(!n.shouldParseTag("photoshop",f,u)){o+=s+s%2;continue}a=w(r.buffer,o,s),f={id:u,value:R(a,0,s)};if(T[u]){try{f.description=T[u].description(a)}catch(e){f.description="<no description formatter>"}i[c||T[u].name]=f}else t&&(i["undefined-".concat(u)]=f)}o+=s+s%2}return i}},Cn=2,xn=4,Tn=(An="8BIM").length,Un={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},En={4:{name:"Preferred CMM type",value:function(e,t){return R(e,t,4)},description:function(e){return null!==e?Ye(e):""}},8:{name:"Profile Version",value:function(e,t){return e.getUint8(t).toString(10)+"."+(e.getUint8(t+1)>>4).toString(10)+"."+(e.getUint8(t+1)%16).toString(10)}},12:{name:"Profile/Device class",value:function(e,t){return R(e,t,4)},description:function(e){switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:function(e,t){return R(e,t,4)}},20:{name:"Connection Space",value:function(e,t){return R(e,t,4)}},24:{name:"ICC Profile Date",value:function(e,t){return t=t,n=(e=e).getUint16(t),r=e.getUint16(t+2)-1,i=e.getUint16(t+4),o=e.getUint16(t+6),a=e.getUint16(t+8),e=e.getUint16(t+10),new Date(Date.UTC(n,r,i,o,a,e)).toISOString();var n,r,i,o,a}},36:{name:"ICC Signature",value:function(e,t){return e=e.buffer.slice(t,t+4),String.fromCharCode.apply(null,new Uint8Array(e))}},40:{name:"Primary Platform",value:function(e,t){return R(e,t,4)},description:Ye},48:{name:"Device Manufacturer",value:function(e,t){return R(e,t,4)},description:Ye},52:{name:"Device Model Number",value:function(e,t){return R(e,t,4)}},64:{name:"Rendering Intent",value:function(e,t){return e.getUint32(t)},description:function(e){switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:function(e,t){return R(e,t,4)}}},wn={read:function(e,t,n){if(n&&t[0].compressionMethod!==p){return n=e,0!==(r=t)[0].compressionMethod?{}:G(new DataView(n.buffer.slice(r[0].offset,r[0].offset+r[0].length)),r[0].compressionMethod,"utf-8","dataview").then(qe).catch(function(){return{}});var r}else{var i,o=e,a=t;try{for(var u=a.reduce(function(e,t){return e+t.length},0),s=new Uint8Array(u),c=0,f=(i=o,(Array.isArray(i)?new DataView(Uint8Array.from(i).buffer):i).buffer),l=1;l<=a.length;l++)(t=>{var e=a.find(function(e){return e.chunkNumber===t});if(!e)throw Error("ICC chunk ".concat(t," not found"));e=f.slice(e.offset,e.offset+e.length),e=new Uint8Array(e),s.set(e,c),c+=e.length})(l);return qe(new DataView(s.buffer))}catch(o){return{}}}}},Fn=84,On=128,Rn="acsp",Mn="desc",Nn="mluc",Gn="text",kn="sig ",Ln=12,Dn={read:function(e,t,n,r,i){e=S(e,"canon",t,t+n,r,i,5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,6<arguments.length&&void 0!==arguments[6]?arguments[6]:void 0,"makerNotes");return e.ShotInfo&&delete(e=D({},e,(t=e.ShotInfo.value,n={},void 0!==t[27]&&(n.AutoRotate={value:t[27],description:0===(t=t[27])?"None":1===t?"Rotate 90 CW":2===t?"Rotate 180":3===t?"Rotate 270 CW":"Unknown"}),n))).ShotInfo,e},SHOT_INFO_AUTO_ROTATE:27},Bn={read:function(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:void 0,a=W(e,t+n+8),t=t+n,n=S(e,en,t,t+10,a,r,i,o,"makerNotes");return(r=n).PentaxModelID&&r.PentaxModelID.value===_n.K3_III&&r.LevelInfo&&delete(n=D({},n,(i=e,o=t+n.LevelInfo.__offset,r=a,e={},o+7>i.byteLength||(t=i.getInt8(o+jn.CAMERA_ORIENTATION),e.CameraOrientation={value:t,description:0===t?"Horizontal (normal)":1===t?"Rotate 270 CW":2===t?"Rotate 180":3===t?"Rotate 90 CW":4===t?"Upwards":5===t?"Downwards":"Unknown"},t=i.getInt16(o+jn.ROLL_ANGLE,r===d),e.RollAngle={value:t,description:""+-.5*t},t=i.getInt16(o+jn.PITCH_ANGLE,r===d),e.PitchAngle={value:t,description:""+-.5*t}),e))).LevelInfo,n},PENTAX_IFD_OFFSET:10,MODEL_ID:_n={K3_III:78420},LIK3III:jn={CAMERA_ORIENTATION:1,ROLL_ANGLE:3,PITCH_ANGLE:5}},zn={read:function(e,t){return{"Image Width":((e,t)=>{if(!(t+0+4>e.byteLength))return{value:e=P.getLongAt(e,t),description:"".concat(e,"px")}})(e,t),"Image Height":((e,t)=>{if(!(t+4+4>e.byteLength))return{value:e=P.getLongAt(e,t+4),description:"".concat(e,"px")}})(e,t),"Bit Depth":((e,t)=>{if(!(t+8+1>e.byteLength))return{value:e=P.getByteAt(e,t+8),description:"".concat(e)}})(e,t),"Color Type":((e,t)=>{if(!(t+9+1>e.byteLength))return{value:e=P.getByteAt(e,t+9),description:{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"}[e]||"Unknown"}})(e,t),Compression:((e,t)=>{if(!(t+10+1>e.byteLength))return{value:e=P.getByteAt(e,t+10),description:0===e?"Deflate/Inflate":"Unknown"}})(e,t),Filter:((e,t)=>{if(!(t+11+1>e.byteLength))return{value:e=P.getByteAt(e,t+11),description:0===e?"Adaptive":"Unknown"}})(e,t),Interlace:((e,t)=>{if(!(t+12+1>e.byteLength))return{value:e=P.getByteAt(e,t+12),description:{0:"Noninterlaced",1:"Adam7 Interlace"}[e]||"Unknown"}})(e,t)}}},Vn={read:function(e,t,n,s){for(var c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,f=5<arguments.length&&void 0!==arguments[5]?arguments[5]:A,r={},i=[],o=0;o<t.length;o++){var a,u,l=t[o],l=((e,t,n,r,i)=>{for(var o,a=[],u=[],s=[],c=Hn,f=p,l=0;l<n&&t+l<e.byteLength;l++)if(c!==Wn){if(c===Jn){o=new DataView(e.buffer.slice(t+l,t+n));break}var d=e.getUint8(t+l);0===d?c=Qe(r,c):c===Hn?a.push(d):c===Xn?u.push(d):c===Kn&&s.push(d)}else f=(e=>{var t=e.type,n=e.dataView,e=e.offset;if(t===m){if(n.getUint8(e)===qn)return n.getUint8(e+1)}else if(t===h)return n.getUint8(e);return p})({type:r,dataView:e,offset:t+l}),r===m&&(l+=Yn),c=Qe(r,c);return f===p||i?(i=G(o,f,r===zt||r===h?"latin1":"utf-8"))instanceof Promise?i.then(function(e){return et(e,r,u,a)}).catch(function(){return et("<text using unknown compression>".split(""),r,u,a)}):et(i,r,u,a):{}})(e,l.offset,l.length,l.type,n);l instanceof Promise?i.push(l.then(function(e){var t,n,r,i,o=e.name,a=e.value,u=e.description;try{if(B.USE_EXIF&&tt(o,a))return f.shouldParseGroup("exif")?{__exif:ln.read(rt(a),$n,s,c,f).tags}:{};if(B.USE_IPTC&&nt(o,a))return f.shouldParseGroup("iptc")?{__iptc:hn.read(rt(a),0,s,f)}:{};if(o&&!tt(o,a)&&!nt(o,a))return f.shouldParseGroup("png")?(t={},r={value:a,description:u},i=(e=>{if("object"!=Ze(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return e+"";if("object"!=Ze(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")})(n=o),(n="symbol"==Ze(i)?i:i+"")in t?Object.defineProperty(t,n,{value:r,enumerable:1,configurable:1,writable:1}):t[n]=r,t):{}}catch(e){}return{}})):(a=l.name,u=l.value,l=l.description,a&&f.shouldParseGroup("png")&&(r[a]={value:u,description:l}))}return{readTags:r,readTagsPromise:0<i.length?Promise.all(i):void 0}}},Hn="STATE_KEYWORD",Wn="STATE_COMPRESSION",Xn="STATE_LANG",Kn="STATE_TRANSLATED_KEYWORD",Jn="STATE_TEXT",qn=Yn=1,Zn={read:function(e,t){for(var n={},r=0;r<t.length;r++){var i=P.getLongAt(e,t[r]+0),o=R(e,t[r]+4,4);"pHYs"===o?(n["Pixels Per Unit X"]=((e,t,n)=>{if(it(e,t,n,0,4))return{value:n=P.getLongAt(e,t+g+0),description:""+n}})(e,t[r],i),n["Pixels Per Unit Y"]=((e,t,n)=>{if(it(e,t,n,4,4))return{value:n=P.getLongAt(e,t+g+4),description:""+n}})(e,t[r],i),n["Pixel Units"]=((e,t,n)=>{if(it(e,t,n,8,1))return{value:n=P.getByteAt(e,t+g+8),description:1===n?"meters":"Unknown"}})(e,t[r],i)):"tIME"===o&&(n["Modify Date"]=((e,t,n)=>{var r,i,o,a;if(it(e,t,n,0,7))return n=P.getShortAt(e,t+g),r=P.getByteAt(e,t+g+2),i=P.getByteAt(e,t+g+3),o=P.getByteAt(e,t+g+4),a=P.getByteAt(e,t+g+5),e=P.getByteAt(e,t+g+6),{value:[n,r,i,o,a,e],description:"".concat(f(n,4),"-").concat(f(r,2),"-").concat(f(i,2)," ").concat(f(o,2),":").concat(f(a,2),":").concat(f(e,2))}})(e,t[r],i))}return n}},Qn={read:function(e,t){var n,r={},i=P.getByteAt(e,t);return r.Alpha={value:(n=16&i)?1:0,description:n?"Yes":"No"},r.Animation={value:(n=2&i)?1:0,description:n?"Yes":"No"},r.ImageWidth=ot(e,t+er),r.ImageHeight=ot(e,t+tr),r}},er=4,nr={read:function(e){return{"GIF Version":(e=>{if(!(e.byteLength<6))return{value:e=R(e,3,3),description:e}})(e),"Image Width":(e=>{if(!(e.byteLength<8))return{value:e=e.getUint16(6,1),description:"".concat(e,"px")}})(e),"Image Height":(e=>{if(!(e.byteLength<10))return{value:e=e.getUint16(8,1),description:"".concat(e,"px")}})(e),"Global Color Map":(e=>{if(!(e.byteLength<11))return{value:e=(128&e.getUint8(10))>>>7,description:1==e?"Yes":"No"}})(e),"Bits Per Pixel":(e=>{if(!(e.byteLength<11))return{value:e=1+(7&e.getUint8(10)),description:"".concat(e," ").concat(1==e?"bit":"bits")}})(e),"Color Resolution Depth":(e=>{if(!(e.byteLength<11))return{value:e=1+((112&e.getUint8(10))>>>4),description:"".concat(e," ").concat(1==e?"bit":"bits")}})(e)}}},rr=[$n=6,tr=7,99],ir={get:function(e,t,n){var r;return(r=t)&&(void 0===r.Compression||rr.includes(r.Compression.value))&&r.JPEGInterchangeFormat&&r.JPEGInterchangeFormat.value&&r.JPEGInterchangeFormatLength&&r.JPEGInterchangeFormatLength.value&&(t.type="image/jpeg",r=n+t.JPEGInterchangeFormat.value,t.image=e.buffer.slice(r,r+t.JPEGInterchangeFormatLength.value),O(t,"base64",function(){return M(this.image)})),t}},or={get:function(e,t){var n={},r=0,i=l(e,"exif","FocalLength",t),o=l(e,"exif","FocalPlaneXResolution",t),a=l(e,"exif","FocalPlaneYResolution",t),u=l(e,"exif","FocalPlaneResolutionUnit",t),s=l(e,"file","Image Width",t),c=l(e,"file","Image Height",t),e=l(e,"exif","FocalLengthIn35mmFilm",t)||((e,t,n,r,i,o)=>{if(e&&t&&n&&r&&i&&o)try{var a;switch(n){case 2:a=25.4;break;case 3:a=10;break;case 4:a=1;break;default:return}var u=e[0]/e[1]*a,s=i/(t[0]/t[1]*a),c=Math.sqrt(Math.pow(r/u,2)+Math.pow(s,2));return o[0]/o[1]*(43.27/c)}catch(e){}})(o,a,u,s,c,i),t=(e&&(n.FocalLength35efl={value:e,description:v.FocalLengthIn35mmFilm(e)},r=1),((e,t)=>{if(e&&t)try{var n=t/(e[0]/e[1]);return{value:n,description:n.toFixed(1)}}catch(e){}})(i,e)),o=(t&&(n.ScaleFactorTo35mmEquivalent=t,r=1),(e=>{if(e)try{var t=2*Math.atan(36/(2*e))*(180/Math.PI);return{value:t,description:t.toFixed(1)+" deg"}}catch(e){}})(e));if(o&&(n.FieldOfView=o,r=1),r)return n}},ct.prototype=Error(),ur={load:ft,loadView:dt,errors:ar={MetadataMissingError:ct}},sr=ar,wt;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e){e=(e=>{if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return e+"";if("object"!=o(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")})(e);return"symbol"==o(e)?e:e+""}function w(t,n,r){try{return new DataView(t,n,r)}catch(e){return new Ft(t,n,r)}}function R(e,t,n){for(var r=[],i=0;i<n&&t+i<e.byteLength;i++)r.push(e.getUint8(t+i));return L(r)}function b(e,t){for(var n=[],r=0;t+r<e.byteLength;){var i=e.getUint8(t+r);if(0===i)break;n.push(i),r++}return L(n)}function F(e,t){var n=e.getUint8(t);return[n,R(e,t+1,n)]}function L(e){return e.map(function(e){return String.fromCharCode(e)}).join("")}function D(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}function O(e,t,n){var r=0;Object.defineProperty(e,t,{get:function(){return r||(r=1,Object.defineProperty(e,t,{configurable:1,enumerable:1,value:n.apply(e),writable:1})),e[t]},configurable:1,enumerable:1})}function M(e){return"undefined"!=typeof btoa?"string"==typeof e?btoa(e):btoa(Array.prototype.reduce.call(new Uint8Array(e),function(e,t){return e+String.fromCharCode(t)},"")):"undefined"!=typeof Buffer?(void 0!==Buffer.from?Buffer.from(e):new Buffer(e)).toString("base64"):void 0}function N(e,t){return Array(t+1).join(e)}function G(e,t,n,r){r=3<arguments.length&&void 0!==r?r:"string";if(0===t&&"function"==typeof DecompressionStream)return i=new DecompressionStream("deflate"),i=new Blob([e]).stream().pipeThrough(i),"dataview"===r?new Response(i).arrayBuffer().then(function(e){return new DataView(e)}):new Response(i).arrayBuffer().then(function(e){return new TextDecoder(n).decode(e)});if(void 0!==t)return Promise.reject("Unknown compression method ".concat(t,"."));if("string"===r)try{return new TextDecoder(n).decode(e)}catch(t){var i=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return Array.from(i,function(e){return String.fromCharCode(e)}).join("")}return e}function i(e){return e.map(function(e){return String.fromCharCode(e)}).join("")}function k(e){if(8<=e.length){var t=i(e.slice(0,8));if("ASCII\0\0\0"===t)return i(e.slice(8));if("JIS\0\0\0\0\0"===t)return"[JIS encoded text]";if("UNICODE\0"===t)return"[Unicode encoded text]";if("\0\0\0\0\0\0\0\0"===t)return"[Undefined encoding]"}return"Undefined"}function H(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}function W(e,t){if(e.getUint16(t)===Ot)return Ot;if(19789===e.getUint16(t))return 19789;throw Error("Illegal byte order value. Faulty image.")}function X(e,t,n,r){e=((e,t,n)=>{try{if(!(n<t+8)){var r=e.getUint16(t+0),i=r===d;if((i||19789===r)&&42===e.getUint16(t+2,i)){var o,a=t+e.getUint32(t+4,i);if(!(n<a+2))return{ifdEntries:o=e.getUint16(a,i),isValid:a+(2+12*o+4)<=n&&0<o}}}}catch(e){}})(e,r,t+2+n);return e?(r=Number.isInteger(e.ifdEntries)?e.ifdEntries:0,(e.isValid?1e9:0)+1e6*r+n):0}function K(e,t,n,r,i,o,a,u){if(void 0===u)return[];for(var s,c,f,l=[],d=n.items,p=0;p<u;p++){var g={extents:[]};g.itemId=(s=e,c=d,(f=t)<2?s.getUint16(c):2===f?s.getUint32(c):void 0),d+=r.item.itemId,g.constructionMethod=1===t||2===t?15&e.getUint16(d):void 0,d+=r.item.constructionMethod,g.dataReferenceIndex=e.getUint16(d),d+=r.item.dataReferenceIndex,g.baseOffset=J(e,d,r.item.baseOffset),d+=r.item.baseOffset,g.extentCount=e.getUint16(d),d+=r.item.extentCount;for(var m=0;m<g.extentCount;m++){var h={};h.extentIndex=((e,t,n,r)=>{if((1===t||2===t)&&0<r)return J(e,n,r)})(e,t,d,a),d+=r.item.extent.extentIndex,h.extentOffset=J(e,d,i),d+=r.item.extent.extentOffset,h.extentLength=J(e,d,o),d+=r.item.extent.extentLength,g.extents.push(h)}l.push(g)}return l}function J(e,t,n){return 4===n?e.getUint32(t):8===n?(console.warn("This file uses an 8-bit offset which is currently not supported by ExifReader. Contact the maintainer to get it fixed."),e.getUint32(t+4)):0}function Y(e,t){v=t;var n,r,i,o,a,u,s,c,f,l,d,p,g,m,h=0===(y=(h=e).getUint32(v))?{length:h.byteLength-v,contentOffset:v+4+4}:1===y&&0===h.getUint32(v+8)?{length:h.getUint32(v+12),contentOffset:v+4+4+8}:{length:y,contentOffset:v+4+4},y=h.length,v=h.contentOffset;if(!(y<8))return 1718909296===(h=e.getUint32(t+4))?(m=y,{type:"ftyp",majorBrand:R(e,v,4),length:m}):1768977008===h?{type:"iprp",subBoxes:Z(e,v,(m=y)-(v-t)),length:m}:1768973167===h?{type:"ipco",properties:Z(e,v,(g=y)-(v-t)),length:g}:1668246642===h?(g=y,{type:"colr",icc:((e,t)=>{var n=R(e,t,4);if("prof"===n||"rICC"===n)return{offset:t+4,length:e.getUint32(t+4),chunkNumber:1,chunksTotal:1}})(e,v),length:g}):(n=e.getUint8(v),1835365473===h?{type:"meta",subBoxes:Z(e,(d=v+1)+3,(p=y)-(d+3-t)),length:p}:1768714083===h?(d=e,p=y,a=v+1+3,s={item:{dataReferenceIndex:2,extentCount:2,extent:{}}},(u=r=n)<2?(s.itemCount=2,s.item.itemId=2):2===u&&(s.itemCount=4,s.item.itemId=4),s.item.constructionMethod=1===u||2===u?2:0,(u={offsetSize:a,lengthSize:a,baseOffsetSize:a+1,indexSize:a+1}).itemCount=a+2,u.items=u.itemCount+s.itemCount,u.item={itemId:0},u.item.constructionMethod=u.item.itemId+s.item.itemId,u.item.dataReferenceIndex=u.item.constructionMethod+s.item.constructionMethod,u=(a={offsets:u,sizes:s}).offsets,s=a.sizes,a=d.getUint8(u.offsetSize)>>4,s.item.extent.extentOffset=a,c=15&d.getUint8(u.lengthSize),s.item.extent.extentLength=c,f=d.getUint8(u.baseOffsetSize)>>4,s.item.baseOffset=f,f=((e,t)=>{if(1===r||2===r)return 15&e.getUint8(t)})(d,u.indexSize),s.item.extent.extentIndex=void 0!==f?f:0,i=d,o=u.itemCount,l=(l=r)<2?i.getUint16(o):2===l?i.getUint32(o):void 0,{type:"iloc",items:K(d,r,u,s,a,c,f,l),length:p}):1768517222===h?(i=e,o=t,u=y,s={entryCount:(s=v+1)+3},(a={}).entryCount=0===(c=n)?2:4,s.itemInfos=s.entryCount+a.entryCount,{type:"iinf",itemInfos:Z(i,(c={offsets:s}.offsets).itemInfos,u-(c.itemInfos-o)),length:u}):1768842853===h?(f=e,l=t,h=v+1,h+=3,t={type:"infe",length:e=y},0!==(v=n)&&1!==v||(t.itemId=f.getUint16(h),t.itemProtectionIndex=f.getUint16(h+=2),t.itemName=b(f,h+=2),h+=t.itemName.length+1),2<=v&&(2===v?(t.itemId=f.getUint16(h),h+=2):3===v&&(t.itemId=f.getUint32(h),h+=4),t.itemProtectionIndex=f.getUint16(h),t.itemType=f.getUint32(h+=2),t.itemName=b(f,h+=4),h+=t.itemName.length+1,t.itemType===Ht?(t.contentType=b(f,h),l+e>(h+=t.contentType.length+1)&&(t.contentEncoding=b(f,h),h+=t.contentEncoding.length+1)):1970432288===t.itemType&&(t.itemUri=b(f,h),h+=t.itemUri.length+1)),t):{type:void 0,length:y})}function q(e){var t,n;return B.USE_EXIF||B.USE_XMP||B.USE_ICC?(t={},(n=(e=>{for(var t=0;t+4+4<=e.byteLength;){var n=Y(e,t);if(void 0===n)break;if("meta"===n.type)return n;t+=n.length}})(e))?(B.USE_EXIF&&(t.tiffHeaderOffset=((e,t)=>{try{var n=t.subBoxes.find(function(e){return"iinf"===e.type}).itemInfos.find(function(e){return e.itemType===Vt}).itemId,r=$(t,n);return(i=r.baseOffset+r.extents[0].extentOffset)+4+e.getUint32(i)}catch(e){}var i})(e,n)),B.USE_XMP&&(t.xmpChunks=(e=>{try{var t=e.subBoxes.find(function(e){return"iinf"===e.type}).itemInfos.find(function(e){return e.itemType===Ht&&"application/rdf+xml"===e.contentType}).itemId,n=$(e,t),r=$(e,t).extents[0];return[{dataOffset:n.baseOffset+r.extentOffset,length:r.extentLength}]}catch(e){}})(n)),B.USE_ICC&&(t.iccChunks=(e=>{try{var t=e.subBoxes.find(function(e){return"iprp"===e.type}).subBoxes.find(function(e){return"ipco"===e.type}).properties.find(function(e){return"colr"===e.type}).icc;if(t)return[t]}catch(e){}})(n)),t.hasAppMarkers=void 0!==t.tiffHeaderOffset||void 0!==t.xmpChunks||void 0!==t.iccChunks,t):{hasAppMarkers:0}):{}}function $(e,t){return e.subBoxes.find(function(e){return"iloc"===e.type}).items.find(function(e){return e.itemId===t})}function Z(e,t,n){for(var r=[Vt,Ht],i=[],o=t;o<t+n;){var a=Y(e,o);if(void 0===a)break;void 0===a.type||void 0!==a.itemType&&-1===r.indexOf(a.itemType)||i.push(a),o+=a.length}return i}function a(e,t,n){return D({},e,{fileType:{value:t,description:n}})}function e(e){return new TextDecoder("utf-16").decode(new Uint8Array(e)).replace(/\u0000+$/,"")}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,t,n){return r=(e=>{if("object"!=te(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return e+"";if("object"!=te(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")})(t),(t="symbol"==te(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:1,configurable:1,writable:1}):e[t]=n,e;var r}function ne(e,t){return e.getUint8(t)}function re(e,t,n){return e.getUint32(t,n===d)}function ie(e,t,n){return e.getInt32(t,n===d)}function oe(e){return 1==e||Array.isArray(e)&&0<e.length}function ae(){return{isActive:0,shouldReturnGroup:e,shouldParseGroup:e,shouldReturnTag:e,shouldParseTag:e};function e(){return 1}}function _(e,t){return e&&Object.prototype.hasOwnProperty.call(e,t)?1==(e=e[t])?1:Array.isArray(e)&&0<e.length:0}function ue(e){var t,n,r,i,o=e.groupKey,a=e.includeValue,u=e.excludeValue,e=e.extraIncludeNames,o=!!rn[o],s={includeAll:0,includeNames:void 0,includeIds:void 0,excludeAll:0,excludeNames:void 0,excludeIds:void 0};if(1==a)s.includeAll=1;else if(Array.isArray(a)){s.includeNames=Object.create(null),o&&(s.includeIds=Object.create(null));for(var c,f=0;f<a.length;f++)t=s,"number"==typeof(n=a[f])&&t.includeIds?t.includeIds[n+""]=1:"string"==typeof n&&(t.includeNames[n.toLowerCase()]=1);for(c in e)s.includeNames[c.toLowerCase()]=1}else if(e&&0<Object.keys(e).length)for(var l in s.includeNames=Object.create(null),e)s.includeNames[l.toLowerCase()]=1;if(1==u)s.excludeAll=1;else if(Array.isArray(u)){s.excludeNames=Object.create(null),o&&(s.excludeIds=Object.create(null));for(var d=0;d<u.length;d++)r=s,"number"==typeof(i=u[d])&&r.excludeIds?r.excludeIds[i+""]=1:"string"==typeof i&&(r.excludeNames[i.toLowerCase()]=1)}return s}function se(e,t,n){return!e.excludeAll&&(e.includeAll||!e.includeNames&&!e.includeIds||void 0!==n&&e.includeIds&&e.includeIds[n+""]||t&&e.includeNames&&e.includeNames[(t+"").toLowerCase()])?!ce(e,t,n):0}function ce(e,t,n){return!!(void 0!==n&&e.excludeIds&&e.excludeIds[n+""]||t&&e.excludeNames&&e.excludeNames[(t+"").toLowerCase()])}function fe(e,t,n){return t+P.getLongAt(e,t+4,n)}function S(e,t,n,r,i,o,a,u,s){var c,f,l=6<arguments.length&&void 0!==a?a:0,d=7<arguments.length&&void 0!==u?u:A,p=8<arguments.length&&void 0!==s?s:"exif",a=P.getTypeSize("SHORT"),g={},m=(u=e,s=i,(f=r)+P.getTypeSize("SHORT")<=u.byteLength?P.getShortAt(u,f,s):0);r+=a;for(var h,y=0;y<m&&!(r+12>e.byteLength);y++){var v=function(e,t,n,r,i){var o,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,u=6<arguments.length&&void 0!==arguments[6]?arguments[6]:A,s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:"exif",c=P.getTypeSize("SHORT"),f=c+P.getTypeSize("SHORT"),l=f+P.getTypeSize("LONG"),d=P.getShortAt(e,r,i),p=P.getShortAt(e,r+c,i),g=P.getLongAt(e,r+f,i);if(void 0!==P.typeSizes[p]&&(a||void 0!==I[t][d])){c=(()=>{if(void 0!==I[t][d]){if("string"==typeof I[t][d])return I[t][d];if(I[t][d].name)return I[t][d].name}return"undefined-".concat(d)})();if(u.shouldParseTag(s,c,d)){f=P.typeSizes[p]*g<=P.getTypeSize("LONG")?le(e,o=r+l,p,g,i):((e,t)=>t+o+P.typeSizes[p]*g<=e.byteLength)(e,n,o=P.getLongAt(e,r+l,i))?le(e,n+o,p,g,i,33723===d):"<faulty value>";a=f=p===P.tagTypes.ASCII?(t=>{try{return t.map(function(e){return decodeURIComponent(escape(e))})}catch(e){return t}})(f=(e=>{for(var t=[],n=0,r=0;r<e.length;r++)"\0"!==e[r]?(void 0===t[n]&&(t[n]=""),t[n]+=e[r]):n++;return t})(f)):f;if(void 0!==I[t][d])if(void 0!==I[t][d].name&&void 0!==I[t][d].description)try{a=I[t][d].description(f)}catch(e){a=de(f)}else a=p===P.tagTypes.RATIONAL||p===P.tagTypes.SRATIONAL?""+f[0]/f[1]:de(f);return{id:d,name:c,value:f,description:a,tagType:p,__offset:o}}}}(e,t,n,r,i,o,d,p);void 0!==v&&(g[v.name]={id:v.id,value:v.value,description:v.description},l&&(g[v.name].computed=(h=v.tagType,c=v.value,h===P.tagTypes.ASCII?Array.isArray(c)&&1===c.length?c[0]:c:h===P.tagTypes.RATIONAL||h===P.tagTypes.SRATIONAL?(h=c,Array.isArray(h)&&2===h.length&&"number"==typeof h[0]&&"number"==typeof h[1]?pe(c):Array.isArray(c)?c.map(pe):c):c)),"MakerNote"===v.name||t===en&&"LevelInfo"===v.name)&&(g[v.name].__offset=v.__offset),r+=12}return B.USE_THUMBNAIL&&r<e.byteLength-P.getTypeSize("LONG")&&0!==(u=P.getLongAt(e,r,i))&&"0th"===t&&d.shouldParseGroup("thumbnail")&&(g.Thumbnail=S(e,"1st",n,n+u,i,o,l,d,"thumbnail")),g}function le(e,t,n,r,i,o){var a=[];5<arguments.length&&void 0!==o&&o&&(r*=P.typeSizes[n],n=P.tagTypes.BYTE);for(var u=0;u<r;u++)a.push(un[n](e,t,i)),t+=P.typeSizes[n];return n===P.tagTypes.ASCII?a=P.getAsciiValue(a):1===a.length&&(a=a[0]),a}function de(e){return e instanceof Array?e.join(", "):e}function pe(e){var t,n;return Array.isArray(e)&&2===e.length&&(t=e[0],n=e[1],Number.isFinite(t))&&Number.isFinite(n)?0===n?null:t/n:e}function y(e,t,n,r){if(r===d){for(var i=0,o=0;o<n;o++)i+=e[t+o]<<8*o;return i}for(var a=0,u=0;u<n;u++)a+=e[t+u]<<8*(n-1-u);return a}function ge(e){e=i(e);return 8<=e.length?e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2):e}function me(e){var e=i(e),t=e;return 6<=e.length&&(t=e.substr(0,2)+":"+e.substr(2,2)+":"+e.substr(4,2),11===e.length)&&(t+=e.substr(6,1)+e.substr(7,2)+":"+e.substr(9,2)),t}function he(e){e=i(e);return"%G"===e?"UTF-8":"%5"===e?"Windows-1252":"%/G"===e?"UTF-8 Level 1":"%/H"===e?"UTF-8 Level 2":"%/I"===e?"UTF-8 Level 3":"/A"===e?"ISO-8859-1":"/B"===e?"ISO-8859-2":"/C"===e?"ISO-8859-3":"/D"===e?"ISO-8859-4":"/@"===e?"ISO-8859-5":"/G"===e?"ISO-8859-6":"/F"===e?"ISO-8859-7":"/H"===e?"ISO-8859-8":"Unknown"}function ye(t){try{return decodeURIComponent(escape(t))}catch(e){return t}}function ve(e,t,n,r,i){for(var o={},a=void 0,u=n+t.size;n<u&&n<e.byteLength;){var s=function(e,t){var n,r,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,u=5<arguments.length&&void 0!==arguments[5]?arguments[5]:A;return 28!==e.getUint8(t)?{tag:null,tagSize:0}:(n=e.getUint16(t+1),r=e.getUint16(t+3),(a||x.iptc[n])&&u.shouldParseTag("iptc",(()=>{var e=x.iptc[n];return e?"string"==typeof e?e:e&&"string"==typeof e.name?e.name:void 0:a?"undefined-".concat(n):void 0})(),n)?(u=((e,t,n)=>{for(var r=[],i=0;i<n;i++)r.push(e.getUint8(t+i));return r})(e,t+5,r),e={id:n,name:((e,t,n)=>e?"string"==typeof e?e:"function"==typeof e.name?e.name(n):e.name:"undefined-".concat(t))(x.iptc[n],n,u),value:u,description:((e,t,n,r)=>{if(e&&void 0!==e.description)try{return e.description(t,n)}catch(e){}return e&&t instanceof Array?mn(r,t):t})(x.iptc[n],u,i,o)},x.iptc[n]&&x.iptc[n].repeatable&&(e.repeatable=1),x.iptc[n]&&void 0!==x.iptc[n].encoding_name&&(e.encoding=x.iptc[n].encoding_name(u)),{tag:e,tagSize:r}):{tag:void 0,tagSize:r})}(e,n,o,a,r,i),c=s.tag,s=s.tagSize;if(null===c)break;c&&("encoding"in c&&(a=c.encoding),void 0===o[c.name]||void 0===c.repeatable?o[c.name]={id:c.id,value:c.value,description:c.description}:(o[c.name]instanceof Array||(o[c.name]=[{id:o[c.name].id,value:o[c.name].value,description:o[c.name].description}]),o[c.name].push({id:c.id,value:c.value,description:c.description}))),n+=5+s}return o}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){return Se(t)?e(t.split("/")):t}function Se(e){return/^-?\d+\/-?\d+$/.test(e)}function Ie(e){var t=(e=>{if(Array.isArray(e))return e})(t=e.split(","))||(e=>{var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,r,i,o,a=[],u=1,s=0;try{for(i=(t=t.call(e)).next;!(u=(n=i.call(t)).done)&&(a.push(n.value),2!==a.length);u=1);}catch(e){s=1,r=e}finally{try{if(!u&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(s)throw r}}return a}})(t)||(e=>{var t;if(e)return"string"==typeof e?be(e,2):"Map"===(t="Object"===(t={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?be(e,2):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})(),n=t[0],t=t[1];if(void 0!==n&&void 0!==t){var n=parseFloat(n),r=parseFloat(t),t=t.charAt(t.length-1);if(!Number.isNaN(n)&&!Number.isNaN(r))return""+(n+r/60)+t}return e}function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ce(e){var n="function"==typeof Map?new Map:void 0;return function(e){if(null===e||!(t=>{try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}})(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return function(e,t,n){var r;return xe()?Reflect.construct.apply(null,arguments):((r=[null]).push.apply(r,t),t=new(e.bind.apply(e,r)),n&&Te(t,n.prototype),t)}(e,arguments,Ue(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:0,writable:1,configurable:1}}),Te(t,e)}(e)}function xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(xe=function(){return!!e})()}function Te(e,t){return(Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){for(var n=t.reduce(function(e,t){return e+t.length},0),r=new Uint8Array(n),i=0,o=0;o<t.length;o++){var a=t[o],u=e.buffer.slice(a.dataOffset,a.dataOffset+a.length);r.set(new Uint8Array(u),i),i+=a.length}return new DataView(r.buffer)}function we(e,t,n){try{var r=((e,t)=>{var n=(()=>{if(t)return t;if("undefined"!=typeof DOMParser)return new DOMParser;try{var e=require("@xmldom/xmldom");return new e.DOMParser({onError:e.onErrorStopParsing})}catch(e){}})();if(n)return{doc:function e(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;try{var i=t.parseFromString(n,"application/xml"),o=i.getElementsByTagName("parsererror");if(0<o.length)throw new Sn(o[0].textContent);return i}catch(i){if("ParseError"===i.name&&(e=>{for(var t=["prefix is non-null and namespace is null","prefix not bound to a namespace","prefix inte bundet till en namnrymd",/Namespace prefix .+ is not defined/],n=0;n<t.length;n++)if(RegExp(t[n]).test(e.message))return 1})(i)&&!r)return e(t,(e=>{var t,n,r,i;return!(n=e.match(/<([A-Za-z_][A-Za-z0-9._-]*)([^>]*)>/))||(n=n[1],t=(e=>{for(var t,n=[],r=/xmlns:([\w-]+)=["'][^"']+["']/g;null!==(t=r.exec(e));)-1===n.indexOf(t[1])&&n.push(t[1]);return n})(e),0===(r=(e=>{for(var t=[],n=/\b([A-Za-z_][A-Za-z0-9._-]*):[A-Za-z_][A-Za-z0-9._-]*\b/g;null!==(r=n.exec(e));){var r=r[1];"xmlns"!==r&&"xml"!==r&&-1===t.indexOf(r)&&t.push(r)}return t})(e).filter(function(e){return-1===t.indexOf(e)})).length)?e:(e=e,r=(e=>{for(var t=[],n=0;n<e.length;n++){var r=e[n],i=vn[r]||"http://fallback.namespace/"+r;t.push(" xmlns:"+r+'="'+i+'"')}return t.join("")})(r),i=RegExp("<"+n+"([^>]*)>"),e.replace(i,"<"+n+"$1"+r+">"))})(n),1);throw i}}(n,(n="string"==typeof e?e:R(e,0,e.byteLength)).replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")),raw:n};throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),Error()})(t,n),i=r.doc,o=r.raw;return e._raw=(e._raw||"")+o,D(e,Oe(function r(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=(e=>{for(var t=[],n=0;n<e.childNodes.length;n++)t.push(e.childNodes[n]);return t})(e);return 1===(t=e).length&&"#text"===t[0].nodeName?n?{}:(e=>e.nodeValue)(e[0]):(e=>{var n={};return e.forEach(function(e){var t;(e=>e.nodeName&&"#text"!==e.nodeName)(e)&&(t=(e=>({attributes:Fe(e),value:r(e)}))(e),void 0!==n[e.nodeName]?(Array.isArray(n[e.nodeName])||(n[e.nodeName]=[n[e.nodeName]]),n[e.nodeName].push(t)):n[e.nodeName]=t)}),n})(e)}(function e(t){for(var n=0;n<t.childNodes.length;n++){if("x:xmpmeta"===t.childNodes[n].tagName)return e(t.childNodes[n]);if("rdf:RDF"===t.childNodes[n].tagName)return t.childNodes[n]}throw Error()}(i),1))),1}catch(e){return 0}}function Fe(e){for(var t={},n=0;n<e.attributes.length;n++)t[e.attributes[n].nodeName]=decodeURIComponent(escape(e.attributes[n].value));return t}function Oe(e){var t,n={};if("string"==typeof e)return e;for(t in e){var r=e[t];(r=Array.isArray(r)?r:[r]).forEach(function(e){D(n,Re(e.attributes)),"object"===Pe(e.value)&&D(n,Ge(e.value))})}return n}function Re(e){var t,n,r={};for(t in e)try{"rdf:parseType"===(n=t)||Me(n)||(r[Ne(t)]={value:e[t],attributes:{},description:u(e[t],t)})}catch(e){}return r}function Me(e){return"xmlns"===e.split(":")[0]}function Ne(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function u(e,t){var n=1<arguments.length&&void 0!==t?t:void 0;if(Array.isArray(e))return t=e.map(function(e){return void 0!==e.value?u(e.value):u(e)}).join(", "),n&&"function"==typeof yn[n]?yn[n](e,t):t;if("object"===Pe(e)){var r,i,o=e,a=[];for(r in o)a.push("".concat((i=r,"CiAdrCity"===i?"CreatorCity":"CiAdrCtry"===i?"CreatorCountry":"CiAdrExtadr"===i?"CreatorAddress":"CiAdrPcode"===i?"CreatorPostalCode":"CiAdrRegion"===i?"CreatorRegion":"CiEmailWork"===i?"CreatorWorkEmail":"CiTelWork"===i?"CreatorWorkPhone":"CiUrlWork"===i?"CreatorWorkUrl":i),": ").concat(u(o[r].value)));return a.join("; ")}try{return n&&"function"==typeof yn[n]?yn[n](e):decodeURIComponent(escape(e))}catch(n){return e}}function Ge(e){var t,n={};for(t in e)try{Me(t)||(n[Ne(t)]=((e,t)=>{var n,r,i,o;return Array.isArray(e)?Ve(e[e.length-1],t):(e=>"Resource"===e.attributes["rdf:parseType"]&&"string"==typeof e.value&&""===e.value.trim())(e)?{value:"",attributes:{},description:""}:ke(e)?Le(e,t):De(e)?_e(e,t):je(e)?Be(e,t):void 0!==ze(e.value)?(n=t,r=ze(e.value).value["rdf:li"],i=s(e),o=[],void 0===r?r=[]:Array.isArray(r)||(r=[r]),r.forEach(function(e){o.push(ke(e=e)?Le(e):De(e)?_e(e).value:je(e)?Be(e).value:Ve(e))}),{value:o,attributes:i,description:u(o,n)}):Ve(e,t)})(e[t],t))}catch(e){}return n}function ke(e){return"Resource"===e.attributes["rdf:parseType"]&&void 0!==e.value["rdf:value"]||void 0!==e.value["rdf:Description"]&&void 0!==e.value["rdf:Description"].value["rdf:value"]}function Le(e,t){var n=s(e),e=(D(n,s(e=void 0!==e.value["rdf:Description"]?e.value["rdf:Description"]:e),(e=>{var t,n={};for(t in e.value)"rdf:value"===t||Me(t)||(n[Ne(t)]=e.value[t].value);return n})(e)),He((e=e).value["rdf:value"])||e.value["rdf:value"].value);return{value:e,attributes:n,description:u(e,t)}}function s(e){var t,n={};for(t in e.attributes)"rdf:parseType"===t||"rdf:resource"===t||Me(t)||(n[Ne(t)]=e.attributes[t]);return n}function De(e){return"Resource"===e.attributes["rdf:parseType"]||void 0!==e.value["rdf:Description"]&&void 0===e.value["rdf:Description"].value["rdf:value"]}function _e(e,t){var n={value:{},attributes:{}};return void 0!==e.value["rdf:Description"]&&(D(n.value,Re(e.value["rdf:Description"].attributes)),D(n.attributes,s(e)),e=e.value["rdf:Description"]),D(n.value,Ge(e.value)),n.description=u(n.value,t),n}function je(e){return 0===Object.keys(e.value).length&&void 0===e.attributes["xml:lang"]&&void 0===e.attributes["rdf:resource"]}function Be(e,t){e=Re(e.attributes);return{value:e,attributes:{},description:u(e,t)}}function ze(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function Ve(e,t){var n=He(e)||Oe(e.value);return{value:n,attributes:s(e),description:u(n,t)}}function He(e){return e.attributes&&e.attributes["rdf:resource"]}function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,n){return r=(e=>{if("object"!=We(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return e+"";if("object"!=We(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")})(t),(t="symbol"==We(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:1,configurable:1,writable:1}):e[t]=n,e;var r}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ke(e,t){for(var n,r,i,o=[],a=0;a<24;a+=8)o.push((i=void 0,i=c(n=e,r=t+a,8),[c(n,r+4,8),i]));return o}function c(e,t,n){var e=P.getLongAt(e,t),t=e>>>31==0?1:-1,r=(2130706432&e)>>>32-n,e=e&parseInt(N("1",32-n),2);return t*(r=r.toString(2)+"."+(N("0",32-n-(t=e.toString(2)).length)+t),parseInt(r.replace(".",""),2)/Math.pow(2,(r.split(".")[1]||"").length))}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ye(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}function qe(e){var t=e.buffer,n=e.getUint32();if(e.byteLength!==n)throw Error("ICC profile length not matching");if(e.byteLength<Fn)throw Error("ICC profile too short");for(var r={},i=Object.keys(En),o=0;o<i.length;o++){var a=i[o],u=En[a],a=u.value(e,parseInt(a,10)),s=a;u.description&&(s=u.description(a)),r[u.name]={value:a,description:s}}if($e(t.slice(36,40))!==Rn)throw Error("ICC profile: missing signature");if(!(t.length<On+4))for(var c=e.getUint32(128),f=132,l=0;l<c;l++){if(d=f,t.length<d+Ln)return r;var d=R(e,f,4),p=e.getUint32(f+4),g=e.getUint32(f+8);if(p>t.length)return r;var m=R(e,p,4);if(m===Mn){var h=e.getUint32(p+8);if(g<h)return r;E(r,d,$e(t.slice(p+12,p+h+11)))}else if(m===Nn){for(var y=e.getUint32(p+8),v=e.getUint32(p+12),b=p+16,S=[],I=0;I<y;I++){var P=R(e,b+0,2),A=R(e,b+2,2),C=e.getUint32(b+4),x=e.getUint32(b+8),x=((e,t,n)=>{for(var r=[],i=0;i<n&&t+i<e.byteLength;i+=2)r.push(e.getUint16(t+i));return 0===r[r.length-1]&&r.pop(),L(r)})(e,p+x,C);S.push({languageCode:P,countryCode:A,text:x}),b+=v}if(1===y)E(r,d,S[0].text);else{for(var T={},U=0;U<S.length;U++)T["".concat(S[U].languageCode,"-").concat(S[U].countryCode)]=S[U].text;E(r,d,T)}}else m===Gn?E(r,d,$e(t.slice(p+8,p+g-7))):m===kn&&E(r,d,$e(t.slice(p+8,p+12)));f+=12}return r}function $e(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function E(e,t,n){Un[t]?e[Un[t].name]={value:n,description:n}:e[t]={value:n,description:n}}function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){return t===Hn&&[m,h].includes(e)?Wn:t===Wn?e===m?Xn:Jn:t===Xn?Kn:Jn}function et(e,t,n,r){var i=(i=e)instanceof DataView?R(i,0,i.byteLength):i;return{name:((e,t,n)=>(n=L(n),e===zt||0===t.length?n:(e=L(t),"".concat(n," (").concat(e,")"))))(t,n,r),value:i,description:t===m?mn("UTF-8",e):i}}function tt(e,t){return"raw profile type exif"===e.toLowerCase()&&"exif"===t.substring(1,5)}function nt(e,t){return"raw profile type iptc"===e.toLowerCase()&&"iptc"===t.substring(1,5)}function rt(e){for(var t=e.match(/\n(exif|iptc)\n\s*\d+\n([\s\S]*)$/)[2].replace(/\n/g,""),n=new DataView(new ArrayBuffer(t.length/2)),r=0;r<t.length;r+=2)n.setUint8(r/2,parseInt(t.substring(r,r+2),16));return n}function it(e,t,n,r,i){return r+i<=n&&t+g+r+i<=e.byteLength}function f(e,t){return"".concat("0".repeat(t-(""+e).length)).concat(e)}function ot(e,t){e=P.getByteAt(e,t)+256*P.getByteAt(e,t+1)+65536*P.getByteAt(e,t+2)+1;return{value:e,description:e+"px"}}function l(e,t,n,r){return r&&e[t]&&e[t][n]?e[t][n].value:!r&&e[n]?e[n].value:void 0}function at(e){for(var t=e.mergeSteps,n=e.deferredResults,r=e.parsedGroups,i=e.expanded,o=e.tagFilter,a=e.dataView,u=e.tiffHeaderOffset,s=e.fileType,c=e.pngTextChunks,f=e.pngTextIsAsync,l=e.thumbnailIfdTags,d=e.deps,p={},g=0;g<t.length;g++)p=(e=>{var t,n,r,i,o=e.step,a=e.deferredResults,u=e.parsedGroups,s=e.expanded,c=e.tagFilter,f=e.dataView,l=e.tiffHeaderOffset,d=e.fileType,p=e.thumbnailIfdTags,g=e.tags,m=e.deps;if("mergeGroupAssign"===o.type)return e=m.filterTagsForReturn(o.groupKey,o.parsedTags,c),ut(g,o.groupKey,e,s,m);if("mergeGroupMerge"===o.type)return e=m.filterTagsForReturn(o.groupKey,o.parsedTags,c),t=g,n=o.groupKey,r=e,i=m,s?(t[n]?t[n]=i.objectAssign({},t[n],r):t[n]=r,t):i.objectAssign({},t,r);if("mergeXmpGroupAssign"===o.type)return e=m.filterTagsForReturn("xmp",o.parsedTags,c),s?(g.xmp=e,g):(delete(e=m.objectAssign({},e))._raw,m.objectAssign({},g,e));if("mergeIccDeferred"===o.type)return e=a[o.deferredKey],e=m.filterTagsForParse("icc",e,c),u.icc=e,c.shouldReturnGroup("icc")?ut(g,"icc",m.filterTagsForReturn("icc",e,c),s,m):g;if("mergePngFile"===o.type)return e=m.filterTagsForReturn("png",o.parsedTags,c),c.shouldReturnGroup("png")?s?(g.png=g.png?m.objectAssign({},g.png,e):e,g.pngFile=e,g):m.objectAssign({},g,e):g;if("mergePngChunk"===o.type)return e=m.filterTagsForReturn("png",o.parsedTags,c),c.shouldReturnGroup("png")?s?(g.png=g.png?m.objectAssign({},g.png,e):e,g):m.objectAssign({},g,e):g;if("processPngTextReadTags"===o.type)return st({readTags:o.readTags,parsedGroups:u,expanded:s,tagFilter:c,tags:g,deps:m});if("processPngTextReadTagsDeferredList"===o.type)for(var h=a[o.deferredKey]||[],y=0;y<h.length;y++)g=st({readTags:h[y],parsedGroups:u,expanded:s,tagFilter:c,tags:g,deps:m});else if("gps"===o.type)s&&c.shouldReturnGroup("gps")&&u.exif&&(e=m.getGpsGroupFromExifTags(u.exif))&&(a=m.filterTagsForReturn("gps",e,c),g.gps=a);else{if("composite"===o.type)return c.shouldReturnGroup("composite")&&(e=g,a=s,c.isActive&&(e={exif:u.exif,file:u.file},a=1),e=m.Composite.get(e,a))?ut(g,"composite",m.filterTagsForReturn("composite",e,c),s,m):g;"thumbnail"!==o.type?"fileType"===o.type&&d&&c.shouldReturnGroup("file")&&c.shouldReturnTag("file","FileType")&&(s?(g.file||(g.file={}),g.file.FileType=d):g.FileType=d):c.shouldReturnGroup("thumbnail")&&c.shouldReturnTag("thumbnail","Thumbnail")?p&&((a=p?m.filterTagsForParse("thumbnail",p,c):void 0)&&(u.thumbnail=a),(e=(m.Constants.USE_JPEG||m.Constants.USE_WEBP)&&m.Constants.USE_EXIF&&m.Constants.USE_THUMBNAIL&&m.Thumbnail.get(f,a,l))?g.Thumbnail=e:delete g.Thumbnail):delete g.Thumbnail}return g})({step:t[g],deferredResults:n,parsedGroups:r,expanded:i,tagFilter:o,dataView:a,tiffHeaderOffset:u,fileType:s,thumbnailIfdTags:l,tags:p,deps:d});return i&&f&&o.shouldReturnGroup("png")&&p.png&&(p.pngText=d.objectAssign({},p.png)),i&&o.shouldReturnGroup("png")&&d.hasPngTextData(c)&&p.png&&!p.pngText&&(p.pngText=d.objectAssign({},p.png)),p}function ut(e,t,n,r,i){return r?(e[t]=n,e):i.objectAssign({},e,n)}function st(e){var t=e.readTags,n=e.parsedGroups,r=e.expanded,i=e.tagFilter,o=e.tags,e=e.deps,a=t.__exif,u=t.__iptc;return delete t.__exif,delete t.__iptc,a&&(a=e.filterTagsForParse("exif",a,i),n.exif=n.exif?e.objectAssign({},n.exif,a):a,i.shouldReturnGroup("exif"))&&(a=e.filterTagsForReturn("exif",a,i),r?o.exif=o.exif?e.objectAssign({},o.exif,a):a:o=e.objectAssign({},o,a)),u&&(a=e.filterTagsForParse("iptc",u,i),n.iptc=n.iptc?e.objectAssign({},n.iptc,a):a,i.shouldReturnGroup("iptc"))&&(u=e.filterTagsForReturn("iptc",a,i),r?o.iptc=o.iptc?e.objectAssign({},o.iptc,u):u:o=e.objectAssign({},o,u)),i.shouldReturnGroup("png")&&(a=e.filterTagsForParse("png",t,i),u=e.filterTagsForReturn("png",a,i),n.pngText=a,r?(o.png=o.png?e.objectAssign({},o.png,u):u,u&&0<Object.keys(u).length&&(o.pngText=o.pngText?e.objectAssign({},o.pngText,u):u)):o=e.objectAssign({},o,u)),o}function ct(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=Error().stack}function ft(e){var r,i,t,n,o,a,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){if(u.async=1,"undefined"==typeof Promise)throw Error("Promise is required when async mode is enabled.");return n=u,(/^\w+:\/\//.test(t=e)?("undefined"!=typeof fetch?function(e,t){var t=(1<arguments.length&&void 0!==t?t:{}).length,n={method:"GET"};return Number.isInteger(t)&&0<=t&&(n.headers={range:"bytes=0-".concat(t-1)}),fetch(e,n).then(function(e){return e.arrayBuffer()})}:function(t,e){var i=(1<arguments.length&&void 0!==e?e:{}).length;return new Promise(function(n,r){var e={};Number.isInteger(i)&&0<=i&&(e.headers={range:"bytes=0-".concat(i-1)}),(0,(/^https:\/\//.test(t)?require("https"):require("http")).get)(t,e,function(e){var t;200<=e.statusCode&&e.statusCode<=299?(t=[],e.on("data",function(e){return t.push(Buffer.from(e))}),e.on("error",function(e){return r(e)}),e.on("end",function(){return n(Buffer.concat(t))})):(r("Could not fetch file: ".concat(e.statusCode," ").concat(e.statusMessage)),e.resume())}).on("error",function(e){return r(e)})})})(t,n):/^data:[^;,]*(;base64)?,/.test(t)?Promise.resolve((a=(o=t).substring(o.indexOf(",")+1),-1!==o.indexOf(";base64")?"undefined"!=typeof atob?Uint8Array.from(atob(a),function(e){return e.charCodeAt(0)}).buffer:"undefined"==typeof Buffer?void 0:void 0!==Buffer.from?Buffer.from(a,"base64"):new Buffer(a,"base64"):(o=decodeURIComponent(a),"undefined"!=typeof Buffer?void 0!==Buffer.from?Buffer.from(o):new Buffer(o):Uint8Array.from(o,function(e){return e.charCodeAt(0)}).buffer))):function(u,e){var s=(1<arguments.length&&void 0!==e?e:{}).length;return new Promise(function(i,o){var a=(()=>{try{return require("fs")}catch(e){}})();a.open(u,function(e,r){e?o(e):a.stat(u,function(e,t){var n;e?o(e):(e=Math.min(t.size,void 0!==s?s:t.size),n=Buffer.alloc(e),a.read(r,{buffer:n,length:e},function(e){e?o(e):a.close(r,function(e){e&&console.warn("Could not close file ".concat(u,":"),e),i(n)})}))})})})}(t,n)).then(function(e){return lt(e,u)})}if("undefined"!=typeof File&&e instanceof File){if(u.async=1,"undefined"==typeof Promise)throw Error("Promise is required when async mode is enabled.");return r=e,i=u.length,new Promise(function(t,e){var n=new FileReader;n.onload=function(e){return t(e.target.result)},n.onerror=function(){return e(n.error)},Number.isInteger(i)&&0<=i&&void 0!==r.slice?n.readAsArrayBuffer(r.slice(0,i)):n.readAsArrayBuffer(r)}).then(function(e){return lt(e,u)})}return lt(e,u)}function lt(e,t){return dt((t=>{try{return new DataView(t)}catch(e){return new Ft(t)}})(e=(e=>{try{return Buffer.isBuffer(e)}catch(e){}})(e)?new Uint8Array(e).buffer:e),t)}function dt(e){var t,n,r,i,o,a,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{expanded:0,async:0,computed:0,includeUnknown:0,domParser:void 0,includeTags:void 0,excludeTags:void 0},s=u.expanded,c=void 0===s?0:s,s=u.async,s=void 0===s?0:s,f=u.computed,f=void 0===f?0:f,l=u.includeUnknown,l=void 0===l?0:l,d=u.domParser,d=void 0===d?void 0:d,p=u.includeTags,p=void 0===p?void 0:p,u=u.excludeTags,g=function(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.includeTags,n=e.excludeTags,r=!!t,i=!!n,e=r||i,o=Object.create(null),a=Object.create(null),u=Object.create(null);if(!e)return ae();var s=r&&(_(t,"iptc")||_(t,"xmp")||_(t,"icc")||_(t,"photoshop")||_(t,"makerNotes")||_(t,"thumbnail")||_(t,"gps")||_(t,"composite")),c=r&&_(t,"composite"),f=Object.create(null);r&&(f=(e=>{var t=(e=>{var t=Object.create(null);if(e){if(Array.isArray(e.exif)&&0<e.exif.length){t[V.exifIfdPointer]=1;{var n=t;var r=e.exif;for(var i=0;i<r.length;i++){var o=r[i];"string"==typeof o&&(0===(o=o.toLowerCase()).indexOf("gps")&&(n[V.gpsInfoIfdPointer]=1),0!==o.indexOf("interoperability")&&0!==o.indexOf("relatedimage")||(n[V.interoperabilityIfdPointer]=1))}}}for(var a in on)if(oe(e[a])){for(var u=on[a],s=0;s<u.length;s++)t[u[s]]=1;t[V.exifIfdPointer]=1}oe(e.gps)&&(t[V.gpsInfoIfdPointer]=1,t[V.exifIfdPointer]=1)}return t})(e);if(_(e,"composite"))for(var n=t,r=an.exif,i=0;i<r.length;i++)n[r[i]]=1;return t})(t));var l,d,p,g,m,h=Object.create(null);for(l in r&&c&&(h=(e=>{for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].toLowerCase()]=1;return t})(an.file)),z){var y=r&&Object.prototype.hasOwnProperty.call(t,l),v=void 0,b=(i&&Object.prototype.hasOwnProperty.call(n,l)&&!y&&(v=n[l]),ue({groupKey:l,includeValue:y?t[l]:void 0,excludeValue:v,extraIncludeNames:Object.create(null)})),y=(o[l]=r?y:1,y&&(p=t[l],Array.isArray(p))&&0===p.length&&(o[l]=0),b.excludeAll&&(o[l]=0),a[l]=b,ue({groupKey:l,includeValue:(m=g=b=p=void 0,p=(d={groupKey:l,hasIncludeTags:r,hasIncludeEntry:y,includeTags:t,shouldParseExif:s,shouldParseFile:c}).groupKey,b=d.includeTags,g=d.shouldParseExif,m=d.shouldParseFile,d.hasIncludeTags?d.hasIncludeEntry?"thumbnail"===p&&Array.isArray(b[p])?1:b[p]:"exif"===p&&g||"file"===p&&m?[]:void 0:1),excludeValue:v,extraIncludeNames:(m=g=b=d=void 0,d=(v={groupKey:l,hasIncludeTags:r,hasIncludeEntry:y,shouldParseExif:s,shouldParseFile:c,exifIncludeDependencies:f,fileIncludeDependencies:h}).groupKey,b=v.shouldParseFile,g=v.exifIncludeDependencies,m=v.fileIncludeDependencies,v.hasIncludeTags?"exif"===d&&(v.shouldParseExif||v.hasIncludeEntry&&0<Object.keys(g).length)?g:"file"===d&&b?m:Object.create(null):Object.create(null))}));u[l]=y}return{isActive:e,shouldReturnGroup:S,shouldParseGroup:I,shouldReturnTag:function(e,t,n){return z[e]?S(e)?se(a[e],t,n):0:1},shouldParseTag:function(e,t,n){return z[e]?I(e)?se(u[e],t,n):0:1}};function S(e){return z[e]?!!o[e]:1}function I(e){return!z[e]||S(e)?1:"exif"===e?s:"file"===e?c:0}}({includeTags:p,excludeTags:void 0===u?void 0:u}),m=Object.create(null),h=[],y=Object.create(null),u=[],v=0,b=void 0,S=void 0,I=Kt.parseAppMarkers(e,s),P=I.fileType,A=I.fileDataOffset,C=I.jfifDataOffset,x=I.tiffHeaderOffset,T=I.iptcDataOffset,U=I.xmpChunks,E=I.iccChunks,w=I.mpfDataOffset,F=I.pngHeaderOffset,O=I.pngTextChunks,R=I.pngChunkOffsets,G=I.vp8xChunkOffset,I=I.gifHeaderOffset,M=(t=(M={fileType:P,fileDataOffset:A,jfifDataOffset:C,tiffHeaderOffset:x,iptcDataOffset:T,xmpChunks:U,iccChunks:E,mpfDataOffset:w,pngHeaderOffset:F,pngTextChunks:O,pngChunkOffsets:R,vp8xChunkOffset:G,gifHeaderOffset:I}).iccChunks,N=M.mpfDataOffset,n=M.pngHeaderOffset,i=M.pngTextChunks,o=M.pngChunkOffsets,r=M.vp8xChunkOffset,a=M.gifHeaderOffset,!!M.fileType||B.USE_JPEG&&B.USE_FILE&&ht(M.fileDataOffset)||B.USE_JPEG&&B.USE_JFIF&&yt(M.jfifDataOffset)||B.USE_EXIF&&vt(M.tiffHeaderOffset)||B.USE_JPEG&&B.USE_IPTC&&bt(M.iptcDataOffset)||B.USE_XMP&&St(M.xmpChunks)||(B.USE_JPEG||B.USE_WEBP)&&B.USE_ICC&&It(t)||B.USE_MPF&&Pt(N)||B.USE_PNG&&B.USE_PNG_FILE&&At(n)||B.USE_PNG&&Ct(i)||B.USE_PNG&&xt(o)||B.USE_WEBP&&Tt(r)||B.USE_GIF&&Ut(a));if(B.USE_JPEG&&B.USE_FILE&&ht(A)&&g.shouldParseGroup("file")&&(!(t=p)||1==t.composite||Array.isArray(t.composite)&&0<t.composite.length||!t.file||1==t.file||!Array.isArray(t.file)||1!==t.file.length||"FileType"!==t.file[0])&&(N=j("file",pn.read(e,A),g),m.file=N,g.shouldReturnGroup("file"))&&h.push({type:"mergeGroupAssign",groupKey:"file",parsedTags:N}),B.USE_JPEG&&B.USE_JFIF&&yt(C)&&g.shouldParseGroup("jfif")&&(n=j("jfif",gn.read(e,C),g),m.jfif=n,g.shouldReturnGroup("jfif"))&&h.push({type:"mergeGroupAssign",groupKey:"jfif",parsedTags:n}),B.USE_EXIF&&vt(x)&&g.shouldParseGroup("exif")&&(o=(i=ln.read(e,x,l,f,g)).tags,r=i.byteOrder,o.Thumbnail&&(b=o.Thumbnail,delete o.Thumbnail),a=j("exif",o,g),m.exif=a,B.USE_TIFF&&B.USE_IPTC&&a["IPTC-NAA"]&&!bt(T)&&g.shouldParseGroup("iptc")&&(p=j("iptc",hn.read(a["IPTC-NAA"].value,0,l,g),g),m.iptc=p,g.shouldReturnGroup("iptc"))&&h.push({type:"mergeGroupAssign",groupKey:"iptc",parsedTags:p}),B.USE_TIFF&&B.USE_XMP&&a.ApplicationNotes&&!St(U)&&g.shouldParseGroup("xmp")&&(t=j("xmp",bn.read(L(a.ApplicationNotes.value),void 0,d),g),m.xmp=t,g.shouldReturnGroup("xmp"))&&(A={type:"mergeXmpGroupAssign",parsedTags:t},c?h.push(A):S=A),B.USE_PHOTOSHOP&&a.ImageSourceData&&a.PhotoshopSettings&&g.shouldParseGroup("photoshop")&&(N=j("photoshop",Pn.read(a.PhotoshopSettings.value,l,g),g),m.photoshop=N,g.shouldReturnGroup("photoshop"))&&h.push({type:"mergeGroupAssign",groupKey:"photoshop",parsedTags:N}),B.USE_TIFF&&B.USE_ICC&&a.ICC_Profile&&!It(E)&&g.shouldParseGroup("icc")&&(C=j("icc",wn.read(a.ICC_Profile.value,[{offset:0,length:a.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]),g),m.icc=C,g.shouldReturnGroup("icc"))&&h.push({type:"mergeGroupAssign",groupKey:"icc",parsedTags:C}),B.USE_MAKER_NOTES&&a.MakerNote&&g.shouldParseGroup("makerNotes")&&((n=a).Make&&n.Make.value&&Array.isArray(n.Make.value)&&"Canon"===n.Make.value[0]&&n.MakerNote&&n.MakerNote.__offset?(i=Dn.read(e,x,a.MakerNote.__offset,r,l,f,g),m.makerNotes=i,g.shouldReturnGroup("makerNotes")&&h.push({type:"mergeGroupAssign",groupKey:"makerNotes",parsedTags:i})):7<(o=a).MakerNote.value.length&&"PENTAX "===L(o.MakerNote.value.slice(0,7))&&o.MakerNote.__offset&&(p=Bn.read(e,x,a.MakerNote.__offset,l,f,g),m.makerNotes=p,g.shouldReturnGroup("makerNotes"))&&h.push({type:"mergeGroupAssign",groupKey:"makerNotes",parsedTags:p})),a.MakerNote&&delete a.MakerNote.__offset,g.shouldReturnGroup("exif")&&h.push({type:"mergeGroupAssign",groupKey:"exif",parsedTags:a}),!c)&&S&&(h.push(S),S=void 0),B.USE_JPEG&&B.USE_IPTC&&bt(T)&&g.shouldParseGroup("iptc")&&(t=j("iptc",hn.read(e,T,l,g),g),m.iptc=t,g.shouldReturnGroup("iptc"))&&h.push({type:"mergeGroupAssign",groupKey:"iptc",parsedTags:t}),B.USE_XMP&&St(U)&&g.shouldParseGroup("xmp")&&(A=j("xmp",bn.read(e,U,d),g),m.xmp=A,g.shouldReturnGroup("xmp"))&&h.push({type:"mergeXmpGroupAssign",parsedTags:A}),(B.USE_JPEG||B.USE_WEBP)&&B.USE_ICC&&It(E)&&g.shouldParseGroup("icc")){var N=wn.read(e,E,s);if(N&&"function"==typeof N.then){if(!s)throw Error("Promise is required when async mode is enabled.");u.push(N.then(function(e){y.iccApp=e})),h.push({type:"mergeIccDeferred",deferredKey:"iccApp"})}else{C=j("icc",N,g);m.icc=C,g.shouldReturnGroup("icc")&&h.push({type:"mergeGroupAssign",groupKey:"icc",parsedTags:C})}}if(B.USE_MPF&&Pt(w)&&g.shouldParseGroup("mpf")&&(n=j("mpf",dn.read(e,w,l,f,g),g),m.mpf=n,g.shouldReturnGroup("mpf"))&&h.push({type:"mergeGroupAssign",groupKey:"mpf",parsedTags:n}),B.USE_PNG&&B.USE_PNG_FILE&&At(F)&&g.shouldParseGroup("png")&&(r=j("png",zn.read(e,F),g),m.pngFile=r,g.shouldReturnGroup("png"))&&h.push({type:"mergePngFile",parsedTags:r}),B.USE_PNG&&Ct(O)&&(g.shouldParseGroup("png")||g.shouldParseGroup("exif")||g.shouldParseGroup("iptc"))&&(o=(i=Vn.read(e,O,s,l,f,g)).readTags,v=!!(p=i.readTagsPromise),h.push({type:"processPngTextReadTags",readTags:o}),p)&&(u.push(p.then(function(e){y.pngTextTagList=e})),h.push({type:"processPngTextReadTagsDeferredList",deferredKey:"pngTextTagList"})),B.USE_PNG&&xt(R)&&g.shouldParseGroup("png")&&(a=j("png",Zn.read(e,R),g),m.pngChunk=a,g.shouldReturnGroup("png"))&&h.push({type:"mergePngChunk",parsedTags:a}),B.USE_WEBP&&Tt(G)&&g.shouldParseGroup("riff")&&(S=j("riff",Qn.read(e,G),g),m.riff=S,g.shouldReturnGroup("riff"))&&h.push({type:"mergeGroupMerge",groupKey:"riff",parsedTags:S}),B.USE_GIF&&Ut(I)&&g.shouldParseGroup("gif")&&(T=j("gif",nr.read(e,I),g),m.gif=T,g.shouldReturnGroup("gif"))&&h.push({type:"mergeGroupMerge",groupKey:"gif",parsedTags:T}),h.push({type:"gps"}),h.push({type:"composite"}),h.push({type:"thumbnail"}),h.push({type:"fileType"}),!M)throw new ar.MetadataMissingError;var k={objectAssign:D,hasPngTextData:Ct,filterTagsForParse:j,filterTagsForReturn:pt,getGpsGroupFromExifTags:mt,Constants:B,Composite:or,Thumbnail:ir};if(s){if("undefined"==typeof Promise)throw Error("Promise is required when async mode is enabled.");return Promise.all(u).then(function(){return at({mergeSteps:h,deferredResults:y,parsedGroups:m,expanded:c,tagFilter:g,dataView:e,tiffHeaderOffset:x,fileType:P,pngTextChunks:O,pngTextIsAsync:v,thumbnailIfdTags:b,deps:k})})}return at({mergeSteps:h,deferredResults:y,parsedGroups:m,expanded:c,tagFilter:g,dataView:e,tiffHeaderOffset:x,fileType:P,pngTextChunks:O,pngTextIsAsync:v,thumbnailIfdTags:b,deps:k})}function j(e,t,n){return n.isActive?gt(e,t,n.shouldParseTag):t}function pt(e,t,n){return n.isActive?gt(e,t,n.shouldReturnTag):t}function gt(e,t,n){if(!t)return t;var r,i={};for(r in t){var o=t[r];n(e,r,(e=>{if(e)return Array.isArray(e)?0===e.length?void 0:e[0].id:e.id})(o))&&(i[r]=o)}return i}function mt(e){var t=void 0;if(e.GPSLatitude&&e.GPSLatitudeRef){t=t||{};try{t.Latitude=H(e.GPSLatitude.value),"S"===e.GPSLatitudeRef.value.join("")&&(t.Latitude=-t.Latitude)}catch(e){}}if(e.GPSLongitude&&e.GPSLongitudeRef){t=t||{};try{t.Longitude=H(e.GPSLongitude.value),"W"===e.GPSLongitudeRef.value.join("")&&(t.Longitude=-t.Longitude)}catch(e){}}if(e.GPSAltitude&&e.GPSAltitudeRef){t=t||{};try{t.Altitude=e.GPSAltitude.value[0]/e.GPSAltitude.value[1],1===e.GPSAltitudeRef.value&&(t.Altitude=-t.Altitude)}catch(e){}}if(t)return t}function ht(e){return void 0!==e}function yt(e){return void 0!==e}function vt(e){return void 0!==e}function bt(e){return void 0!==e}function St(e){return Array.isArray(e)&&0<e.length}function It(e){return Array.isArray(e)&&0<e.length}function Pt(e){return void 0!==e}function At(e){return void 0!==e}function Ct(e){return Array.isArray(e)&&0<e.length}function xt(e){return void 0!==e}function Tt(e){return void 0!==e}function Ut(e){return void 0!==e}var Et,wt,Ft,p,B,Ot,d,Rt,Mt,Nt,Gt,kt,Lt,Dt,_t,jt,g,Bt,zt,m,h,Vt,Ht,Wt,Xt,Kt,v,Jt,Yt,qt,$t,Zt,Qt,en,I,tn,nn,P,rn,z,V,on,an,A,un,sn,cn,fn,ln,dn,C,pn,gn,x,mn,hn,yn,vn,bn,Sn,T,In,Pn,An,Cn,xn,Tn,Un,En,wn,Fn,On,Rn,Mn,Nn,Gn,kn,Ln,Dn,_n,jn,Bn,zn,Vn,Hn,Wn,Xn,Kn,Jn,Yn,qn,$n,Zn,Qn,er,tr,nr,rr,ir,or,ar,ur,sr});