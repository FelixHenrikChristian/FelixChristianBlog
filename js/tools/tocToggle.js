import{updateStyleStatus}from"../state/styleStatus.js";let didInit=!1,getTocElements=()=>({toggleBar:document.querySelector(".page-aside-toggle"),postPageContainerDom:document.querySelector(".post-page-container"),toggleBarIcon:document.querySelector(".page-aside-toggle i"),mainContentDom:document.querySelector(".main-content")}),toggleClassName=(e,t,o)=>{e&&e.classList.toggle(t,o)},applyTocState=(e,t)=>{toggleClassName(e.toggleBarIcon,"fas",t),toggleClassName(e.toggleBarIcon,"fa-indent",t),toggleClassName(e.toggleBarIcon,"fa-outdent",!t),toggleClassName(e.postPageContainerDom,"show-toc",t),toggleClassName(e.mainContentDom,"has-toc",t)},showToggle=e=>{e.toggleBar&&(e.toggleBar.style.display="flex")},hideToggle=e=>{e.toggleBar&&(e.toggleBar.style.display="none")},handleToggleClick=e=>{var t;e.target.closest(".page-aside-toggle")&&(e=getTocElements()).postPageContainerDom&&e.mainContentDom&&(t=!e.postPageContainerDom.classList.contains("show-toc"),updateStyleStatus({isOpenPageAside:t}),showToggle(e),applyTocState(e,t))};function initTocToggle({signal:e}={}){!didInit&&e&&(didInit=!0,document.addEventListener("click",handleToggleClick,{signal:e}));let t=getTocElements();return{pageAsideHandleOfTOC(e){t.postPageContainerDom&&t.mainContentDom?(showToggle(t),applyTocState(t,e)):hideToggle(t)},hideToggle(){hideToggle(t)}}}export{initTocToggle};