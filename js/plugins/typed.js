let instances=new Map,initTokens=new Map,normalizeSubtitleText=e=>Array.isArray(e)?e.filter(e=>"string"==typeof e&&e):"string"==typeof e&&e?[e]:[],destroyInstance=e=>{var t=instances.get(e);if(t&&"function"==typeof t.destroy)try{t.destroy()}catch(e){console.error("Failed to destroy Typed instance:",e)}instances.delete(e);t=document.getElementById(e);t&&(t.innerHTML="")},createTyped=(e,t,o)=>{void 0!==window.Typed&&document.getElementById(e)&&(destroyInstance(e),t=new window.Typed("#"+e,{strings:t,typeSpeed:o.typeSpeed,smartBackspace:o.smartBackspace,backSpeed:o.backSpeed,backDelay:o.backDelay,loop:o.loop,startDelay:o.startDelay}),instances.set(e,t))},subtitleConfig=theme?.home_banner?.subtitle||{},hitokotoConfig=subtitleConfig.hitokoto||{},config={usrTypeSpeed:subtitleConfig.typing_speed,usrBackSpeed:subtitleConfig.backing_speed,usrBackDelay:subtitleConfig.backing_delay,usrStartDelay:subtitleConfig.starting_delay,usrLoop:subtitleConfig.loop,usrSmartBackspace:subtitleConfig.smart_backspace,usrHitokotoAPI:hitokotoConfig.api};export default function initTyped(o){let i=(initTokens.get(o)||0)+1;initTokens.set(o,i);var{usrTypeSpeed:e,usrBackSpeed:t,usrBackDelay:a,usrStartDelay:n,usrLoop:s,usrSmartBackspace:r,usrHitokotoAPI:c}=config;let p={typeSpeed:e??100,smartBackspace:r??!1,backSpeed:t??80,backDelay:a??1500,loop:s??!1,startDelay:n??500};if(Boolean(hitokotoConfig.enable))return c?void fetch(c).then(e=>e.json()).then(e=>{var t;initTokens.get(o)===i&&(t="string"==typeof e?.hitokoto?e.hitokoto:"")&&(e=(e="string"==typeof e?.from_who&&hitokotoConfig.show_author?e.from_who:"")?t+"——"+e:t,createTyped(o,[e],p))}).catch(e=>{console.error("Failed to fetch hitokoto:",e)}):void 0;e=normalizeSubtitleText(subtitleConfig.text);0!==e.length&&createTyped(o,e,p)}export{config};