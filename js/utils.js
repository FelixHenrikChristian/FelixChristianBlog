import{updateScrollStyle,updateHomeBannerBlur}from"./utils/scroll.js";import{initFontSizeAdjust,initGoComment,initToolsListToggle,updateAutoHideTools}from"./utils/sideTools.js";import{initHomeBannerHeight,initPageHeightHandle,relativeTimeInHome}from"./utils/layout.js";let activeUtils=null,didInitScroll=!1,debounce=(t,o)=>{let l;return(...e)=>{clearTimeout(l),l=setTimeout(()=>t(...e),o)}},handleScroll=()=>{activeUtils&&(activeUtils.updateScrollStyle(),activeUtils.updateAutoHideTools())},handleHomeBannerBlur=()=>{activeUtils&&activeUtils.updateHomeBannerBlur()},registerScrollHandlers=e=>{!didInitScroll&&e&&(didInitScroll=!0,window.addEventListener("scroll",handleScroll,{signal:e}),window.addEventListener("scroll",debounce(handleHomeBannerBlur,20),{signal:e}))},initUtilsGlobals=({signal:e}={})=>{registerScrollHandlers(e)},initUtilsPage=({signal:e}={})=>{let t={html_root_dom:document.querySelector("html"),pageTop_dom:document.querySelector(".main-content-header"),homeBanner_dom:document.querySelector(".home-banner-container"),homeBannerBackground_dom:document.querySelector(".home-banner-background"),scrollProgressBar_dom:document.querySelector(".scroll-progress-bar"),backToTopButton_dom:document.querySelector(".tool-scroll-to-top"),toolsList:document.querySelector(".hidden-tools-list"),toggleButton:document.querySelector(".toggle-tools-list"),fontAdjPlus_dom:document.querySelector(".tool-font-adjust-plus"),fontAdMinus_dom:document.querySelector(".tool-font-adjust-minus"),innerHeight:window.innerHeight,prevScrollValue:0,triggerViewHeight:.5*window.innerHeight,isHasScrollProgressBar:!0===theme.global.scroll_progress.bar,isHasScrollPercent:!0===theme.global.scroll_progress.percentage};activeUtils={updateScrollStyle:()=>updateScrollStyle(t),updateAutoHideTools:updateAutoHideTools,updateHomeBannerBlur:()=>updateHomeBannerBlur(t)},updateAutoHideTools(),initToolsListToggle(t,e),initFontSizeAdjust(t,e),initGoComment(e),initPageHeightHandle(t),initHomeBannerHeight(t),relativeTimeInHome()};export{initUtilsGlobals,initUtilsPage};