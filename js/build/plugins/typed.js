let e=new Map,t=new Map,createTyped=(t,o,a)=>{if(void 0!==window.Typed&&document.getElementById(t)){var r=t,s=e.get(r);if(s&&"function"==typeof s.destroy)try{s.destroy()}catch(e){console.error("Failed to destroy Typed instance:",e)}e.delete(r),(s=document.getElementById(r))&&(s.innerHTML="");r=new window.Typed("#"+t,{strings:o,typeSpeed:a.typeSpeed,smartBackspace:a.smartBackspace,backSpeed:a.backSpeed,backDelay:a.backDelay,loop:a.loop,startDelay:a.startDelay});e.set(t,r)}},o=theme?.home_banner?.subtitle||{},r=o.hitokoto||{},config={usrTypeSpeed:o.typing_speed,usrBackSpeed:o.backing_speed,usrBackDelay:o.backing_delay,usrStartDelay:o.starting_delay,usrLoop:o.loop,usrSmartBackspace:o.smart_backspace,usrHitokotoAPI:r.api};export default function initTyped(a){let s=(t.get(a)||0)+1,{usrTypeSpeed:e,usrBackSpeed:p,usrBackDelay:c,usrStartDelay:n,usrLoop:i,usrSmartBackspace:y,usrHitokotoAPI:d}=(t.set(a,s),config),l={typeSpeed:e??100,smartBackspace:y??!1,backSpeed:p??80,backDelay:c??1500,loop:i??!1,startDelay:n??500};if(Boolean(r.enable))return d?void fetch(d).then(e=>e.json()).then(e=>{var o;t.get(a)===s&&(o="string"==typeof e?.hitokoto?e.hitokoto:"")&&(e="string"==typeof e?.from_who&&r.show_author?e.from_who:"",createTyped(a,[e?o+"——"+e:o],l))}).catch(e=>{console.error("Failed to fetch hitokoto:",e)}):void 0;k=o.text;var k=Array.isArray(k)?k.filter(e=>"string"==typeof e&&e):"string"==typeof k&&k?[k]:[];0!==k.length&&createTyped(a,k,l)}export{config};