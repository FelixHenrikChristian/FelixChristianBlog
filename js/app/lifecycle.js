let readyCallbacks=[],pageViewCallbacks=[],visitStartCallbacks=[],beforeReplaceCallbacks=[],readyFired=!1,didInitSwupHooks=!1,runCallbacks=(e,a)=>{e.forEach(e=>{try{e(a)}catch(e){console.error("Lifecycle callback failed:",e)}})},fireReady=()=>{readyFired||(readyFired=!0,runCallbacks(readyCallbacks),runCallbacks(pageViewCallbacks,{initial:!0}))},initSwupHooks=e=>{!didInitSwupHooks&&e&&e.hooks&&(didInitSwupHooks=!0,e.hooks.on("page:view",e=>{runCallbacks(pageViewCallbacks,e)}),e.hooks.on("visit:start",e=>{runCallbacks(visitStartCallbacks,e)}),e.hooks.before("content:replace",e=>{runCallbacks(beforeReplaceCallbacks,e)}))},handleSwupReady=e=>{e=window.swup||e?.detail?.swup;initSwupHooks(e)},onReady=("loading"===document.readyState?document.addEventListener("DOMContentLoaded",fireReady,{once:!0}):fireReady(),window.swup&&window.swup.hooks?initSwupHooks(window.swup):window.addEventListener("redefine:swup:ready",handleSwupReady,{once:!0}),e=>{"function"==typeof e&&(readyFired?e():readyCallbacks.push(e))}),onPageView=e=>{"function"==typeof e&&(pageViewCallbacks.push(e),readyFired)&&e({initial:!0})},onVisitStart=e=>{"function"==typeof e&&visitStartCallbacks.push(e)},onBeforeContentReplace=e=>{"function"==typeof e&&beforeReplaceCallbacks.push(e)};export{onReady,onPageView,onVisitStart,onBeforeContentReplace};